<!doctype html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-minimal.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />





  <link rel="alternate" href="/atom.xml" title="kajlund.net" type="application/atom+xml" />




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="Personal blog of Kaj Lund a.k.a. LuKa">
<meta property="og:type" content="website">
<meta property="og:title" content="kajlund.net">
<meta property="og:url" content="http://kajlund.net/index.html">
<meta property="og:site_name" content="kajlund.net">
<meta property="og:description" content="Personal blog of Kaj Lund a.k.a. LuKa">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="kajlund.net">
<meta name="twitter:description" content="Personal blog of Kaj Lund a.k.a. LuKa">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://kajlund.net/"/>





  <title>kajlund.net</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">kajlund.net</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Personal blog of Kaj Lund a.k.a. LuKa</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kajlund.net/2017/06/17/vue-basics/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaj Lund">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/luka.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kajlund.net">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2017/06/17/vue-basics/" itemprop="url">Vue Basics</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-17T21:41:30+03:00">
                2017-06-17
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2017-06-18T18:38:57+03:00">
                2017-06-18
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Vue/" itemprop="url" rel="index">
                    <span itemprop="name">Vue</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://vuejs.org" target="_blank" rel="external">Vue.js</a> <em>(pronounced /vjuː/, like view)</em> is a JavaScript library for building interactive web interfaces. The goal of Vue.js is to provide the benefits of reactive data binding and composable view components with an API that is as simple as possible. It was created and is maintained by by <a href="http://evanyou.me/" target="_blank" rel="external">Evan You</a> a former employee at Google and Meteor.</p>
<h2 id="Why-Vue"><a href="#Why-Vue" class="headerlink" title="Why Vue?"></a>Why Vue?</h2><ul>
<li>Vue is feature rich despite small size</li>
<li>Simplicity - Easy to get going and allows you to use ES5, ES6 or even TypeScript</li>
<li>Compactness - 16Kb minified and gzipped</li>
<li>Speed - Great runtime performance</li>
<li>Versatile - works for small and large projects</li>
<li>Very good documentation</li>
</ul>
<h2 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h2><ul>
<li>ES5 or ES6 style compatible down to IE8</li>
<li>Templates using HTML like Angular with Directives</li>
<li>Reactivity</li>
<li>2-way data binding</li>
<li>Components</li>
<li><a href="http://router.vuejs.org/" target="_blank" rel="external">Vue Router</a> for routing, <a href="https://vuex.vuejs.org/" target="_blank" rel="external">Vuex</a> for state management</li>
</ul>
<h5 id="Vue-in-comparison"><a href="#Vue-in-comparison" class="headerlink" title="Vue in comparison"></a>Vue in comparison</h5><ul>
<li>Vue uses HTML templates and directives but supports React-style render methods and JSX.</li>
<li>You can use build tools and transpilers but you don’t have to</li>
<li>Vue has a small footprint (~26KB minified) so could also be used for simple scenarios. You could for instance replace Bootstrap + jQuery with <a href="http://yuche.github.io/vue-strap/" target="_blank" rel="external">VueStrap</a></li>
<li>Simple syntax compared to React, also faster</li>
</ul>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><p>Check <a href="https://vuejs.org/v2/guide/installation.html" target="_blank" rel="external">here</a></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/vue/dist/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Minimal</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">new</span> Vue(&#123;</div><div class="line">    <span class="attr">el</span>: <span class="string">'#app'</span></div><div class="line">&#125;):</div></pre></td></tr></table></figure>
<ul>
<li>Vue proxies all data properties to make them available via this.</li>
<li>You cannot have Vue evaluationg expressions fot html attributes i.e. <code>&lt;a href=&quot;&quot;&gt;Link&lt;/a&gt;</code> Use the <a href="https://vuejs.org/v2/api/#v-bind" target="_blank" rel="external">v-bind directive</a> instead.</li>
</ul>
<blockquote>
<p>Avoid writing code in view templates. Use calculated attributes and methods.</p>
</blockquote>
<h2 id="Directives"><a href="#Directives" class="headerlink" title="Directives"></a>Directives</h2><p>A <a href="https://vuejs.org/v2/api/#Directives" target="_blank" rel="external">directive</a> is an instruction placed in the view template</p>
<blockquote>
<p>Use <code>v-bind</code> for binding to html attributes, use <code>v-on</code> (@) for listening to events and finally <code>v-model</code> for two-way data binding.</p>
</blockquote>
<table>
<thead>
<tr>
<th>Directive</th>
<th>Shorthand</th>
<th>Sample</th>
</tr>
</thead>
<tbody>
<tr>
<td>v-on</td>
<td>@</td>
<td>v-on:click -&gt; @click</td>
</tr>
<tr>
<td>v-bind</td>
<td>:</td>
<td>v-bind:href -&gt; :href</td>
</tr>
</tbody>
</table>
<h2 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h2><p><a href="https://vuejs.org/v2/guide/events.html" target="_blank" rel="external">Events</a> are a fundamental part for interactions with the user. Vue can intercept most events and allows you to write custom event handlers.</p>
<p>The generic syntax is: <code>v-on:DOMevent</code>=”methodEventHandler” where DOMevent is any DOM event and methodEventHandler is a function in the methods section of your Vue declaration. Shortcut for v-on is the @ sign.</p>
<h5 id="Passing-Event-Arguments"><a href="#Passing-Event-Arguments" class="headerlink" title="Passing Event Arguments"></a>Passing Event Arguments</h5><p>You can pass arguments to event handler like any other function. If you need access to the original DOM event you can pass it as a param using the special <code>$event</code> variable.</p>
<h5 id="Modifiers"><a href="#Modifiers" class="headerlink" title="Modifiers"></a>Modifiers</h5><p>Vue implements so called <a href="https://vuejs.org/v2/guide/events.html#Event-Modifiers" target="_blank" rel="external">Event Modifiers</a> to deal with DOM event details so that you don’t have to deal with a lot of similar logic in your event handlers.</p>
<p>Use <code>event.preventDefault()</code> and  <code>event.stopPropagation()</code> in an event handler to stop default behavior.</p>
<p><a href="https://vuejs.org/v2/guide/events.html#Key-Modifiers" target="_blank" rel="external">Key modifiers</a> provides similar functionality for key events. I.e. <code>&lt;input type=&quot;text&quot; v-on:keyup.enter=&quot;alertMe()&quot;&gt;</code></p>
<h2 id="Two-Way-Data-Binding"><a href="#Two-Way-Data-Binding" class="headerlink" title="Two-Way Data Binding"></a>Two-Way Data Binding</h2><p>Two-way data binding means updating a variable with the value from a UI element when it changes and vice-versa. Vue uses the <code>v-model</code> directive for doing these kinds of bindings. You can find more info on form input bindings <a href="https://vuejs.org/v2/guide/forms.html" target="_blank" rel="external">here</a></p>
<h2 id="Computed-Properties"><a href="#Computed-Properties" class="headerlink" title="Computed Properties"></a>Computed Properties</h2><p>You can data-bind to computed properties and Vue will watch dependencies i.e. computed properties are implemented like functions but used like properties. They are also reactive as opposed to ordinary methods. This means that Vue caches result and watches variables so that the function only is called when necessary. More documentation on <a href="https://vuejs.org/v2/guide/computed.html" target="_blank" rel="external">Computed Properties and Watchers </a>. If you know you always want to recalculate when DOM changes you can use an ordinary function.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">data: &#123;</div><div class="line">	propA: 3,</div><div class="line">	probB: 2</div><div class="line">&#125;,</div><div class="line">computed: &#123;</div><div class="line">	sumAB: function () &#123;</div><div class="line">	    return this.propA * this.propB;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="Using-the-Watch-object"><a href="#Using-the-Watch-object" class="headerlink" title="Using the Watch object"></a>Using the Watch object</h5><p>In general you should use computer properties instead because they are more optimized. However computed properties need to return immediately meaning you can only do synchronous calls in them. When you need to do an asyncronous call you need to use a watch function.</p>
<h2 id="Conditionals"><a href="#Conditionals" class="headerlink" title="Conditionals"></a>Conditionals</h2><p>v-if adds and removes element and all nested elements from the DOM. Later versions of Vue also have a v-elseif<br>v-else needs to be attached to sibling following v-if</p>
<p>You can wrap elements inside the non-rendered <code>&lt;template&gt;</code> element if you need the <code>v-if</code> to apply to multiple sibling elements without introducing an extra <code>&lt;div&gt;</code> element.</p>
<p>If you only want to show/hide not add/remove elements you can use the <code>v-show</code> element.</p>
<h2 id="Lists"><a href="#Lists" class="headerlink" title="Lists"></a>Lists</h2><p>Vue uses the <code>v-for</code> directive to loop enumerables.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"item in items"</span>&gt;</span>&#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<p>You can get the index of item as well. It needs to be the second param. If you want to output multiple non-nested elements you can wrap them inside a <code>&lt;template&gt;</code>.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(item, i) in items"</span>&gt;</span>&#123;&#123;i&#125;&#125;. &#123;&#123;item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<p>You could loop through the properties of an object:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">"(value, key) in person"</span>&gt;</span>&#123;&#123;key&#125;&#125;: &#123;&#123;value&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
<p>Whenever possible, use a unique key attribute when generating list items.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&lt;div v-for=&quot;item in items&quot; v-bind:key=&quot;item.id&quot;&gt;</div><div class="line">	&lt;!-- content --&gt;</div><div class="line">&lt;/div&gt;</div></pre></td></tr></table></figure>
<h2 id="Transitions"><a href="#Transitions" class="headerlink" title="Transitions"></a>Transitions</h2><p>Allows us to add effects to UI</p>
<ul>
<li>Vue provides a way to apply transitions when items are inserted, updated or removed from the DOM</li>
<li>Transitions are used in conjunction with directives like v-if v-show etc.</li>
<li>Transitions use the non-rendering component <transition></transition></li>
<li>Vue automatically checks for CSS transitions or animations to apply to target element</li>
<li>Vue applies classes v-enter, v-enter-active, v-leave, v-leave-active</li>
<li>Giving  transition a name will replace the v with the name i.e. myTrans-enter, myTrans-leave</li>
</ul>
<h2 id="The-Vue-JS-instance"><a href="#The-Vue-JS-instance" class="headerlink" title="The Vue JS instance"></a>The Vue JS instance</h2><p>The Vue instance acts as the middle man between our business logic and the DOM. Vue instance common properties: <code>el</code>, <code>data</code>, <code>methods</code>, <code>computed</code> and <code>watch</code>.</p>
<p>A page can contain many Vue instances hooked upp to different elements. A real scenario for this would be when adding some components here and there on an otherwise static page i.e. not typically when building SPAs.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">&lt;div id="app1" class="app"&gt;</div><div class="line">  &lt;h1&gt;&#123;&#123;title&#125;&#125;&lt;/h1&gt;</div><div class="line">&lt;/div&gt;</div><div class="line"></div><div class="line">&lt;div id="app2" class="app"&gt;</div><div class="line">  &lt;h1&gt;&#123;&#123;title&#125;&#125;&lt;/h1&gt;</div><div class="line">&lt;/div&gt;</div><div class="line">...</div><div class="line">new Vue(&#123;</div><div class="line">  el: '#app1',</div><div class="line">  data: &#123; title: 'App #1' &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">new Vue(&#123;</div><div class="line">  el: '#app2',</div><div class="line">  data: &#123; title: 'App #2' &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>The Vue instance can be accessed from outside of the Vue app or from inside another instance if we assign the instances to variables.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> vm1 = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">  <span class="attr">data</span>: &#123;<span class="attr">title</span>: <span class="string">'vm1'</span>&#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  vm1.title = <span class="string">'Changed by timer'</span>;</div><div class="line">&#125;, <span class="number">3000</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> vm2 = <span class="keyword">new</span> Vue(&#123;</div><div class="line">  <span class="attr">el</span>: <span class="string">'#app'</span>,</div><div class="line">  <span class="attr">data</span>: &#123;<span class="attr">title</span>: <span class="string">'vm2'</span>&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>In the above sample we can read Vue properties. Although you could also add properties like <code>vm2.myOtherTitle = &#39;&#39;;</code> they won’t be reactive. This is because Vue creates getters and setters in the constructor when called.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$el</code></td>
<td>A reference to the element where the Vue app was mounted</td>
</tr>
<tr>
<td><code>$data</code></td>
<td>Data is an object holding all our data properties. (vm1.title === vm1.$data.title)</td>
</tr>
<tr>
<td><code>$ref</code></td>
<td>Can be used to reference DOM elements</td>
</tr>
<tr>
<td>$mount</td>
<td>Can be used to mount a Vue instance.  Remove el from config and call vm1.$mount(‘#app1’);</td>
</tr>
</tbody>
</table>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"showInfo"</span> <span class="attr">ref</span>=<span class="string">"myButton"</span>&gt;</span>Info<span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line">...</div><div class="line">var data = this.$refs.myButton.innerHtml();</div></pre></td></tr></table></figure>
<p>You can easily read data but beware that writing goes straight to DOM bypassing Vue. If you want to dive deeper read the <a href="https://vuejs.org/v2/guide/instance.html" target="_blank" rel="external">guide</a> and the <a href="https://vuejs.org/v2/api/" target="_blank" rel="external">API Docs</a>.</p>
<h2 id="Lifecycle-Hooks"><a href="#Lifecycle-Hooks" class="headerlink" title="Lifecycle Hooks"></a>Lifecycle Hooks</h2><ul>
<li>Vue instances goes through a series of initialization steps when created</li>
<li>Sets up data observation, template compilation mount to DOM etc.</li>
<li>Lifecycle hooks gives us opportunity to execute custom logic at each point</li>
<li>Hooks include created, mounted, updated, destroyed etc</li>
</ul>
<p>Check out the <a href="https://vuejs.org/v2/guide/instance.html#Lifecycle-Diagram" target="_blank" rel="external">Lifecycle Diagram</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</div><div class="line">	<span class="attr">data</span>: &#123;</div><div class="line">	    <span class="attr">a</span>: <span class="number">1</span></div><div class="line">	&#125;,</div><div class="line">	<span class="attr">created</span>: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">	    <span class="built_in">console</span>.log(<span class="string">'a is:'</span> + <span class="keyword">this</span>.a);</div><div class="line">	&#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>For more info on Vue’s reactivity read the <a href="https://vuejs.org/v2/guide/reactivity.html" target="_blank" rel="external">Guide</a></p>
<h2 id="Filters"><a href="#Filters" class="headerlink" title="Filters"></a>Filters</h2><ul>
<li>Used to apply common formatting</li>
<li>Usable in both interpolations and bind expressions</li>
<li>Appended to the end of an expression denoted by the pipe symbol.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">&#123;&#123;message | capitalize&#125;&#125;</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">v-bind:id</span>=<span class="string">"rawId | formattedId"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kajlund.net/2016/07/08/hapi-intro/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaj Lund">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/luka.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kajlund.net">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/07/08/hapi-intro/" itemprop="url">Hapi intro</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-07-08T18:25:30+03:00">
                2016-07-08
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2017-06-17T21:29:55+03:00">
                2017-06-17
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Frameworks/" itemprop="url" rel="index">
                    <span itemprop="name">Frameworks</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><a href="http://hapijs.com/" target="_blank" rel="external">hapi</a> is an Open Source Web Application Framework for NodeJS developed by a team at Walmart Labs lead by Eran Hammer.</li>
<li>Configuration Over Code -&gt; Less time configuring server, more time building app.</li>
<li>Hapi is used by companies like PayPal, Yahoo, Disney, macys, Mozilla and npm.</li>
</ul>
<blockquote>
<p>hapi was created around the idea that configuration is better than code, that business logic must be isolated from the transport layer, and that native node constructs like buffers and streams should be supported as first class objects. But most importantly, it was created to provide a modern, comprehensive environment in which as much of the effort is spent delivering business value.<br>– Eran Hammer (creator of hapi)</p>
</blockquote>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm init</div><div class="line">npm install --save hapi</div></pre></td></tr></table></figure>
<h2 id="Hello-World-Server"><a href="#Hello-World-Server" class="headerlink" title="Hello World Server"></a>Hello World Server</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> Hapi = <span class="built_in">require</span>(<span class="string">'hapi'</span>);</div><div class="line"><span class="keyword">const</span> server = <span class="keyword">new</span> Hapi.Server();</div><div class="line"></div><div class="line">server.connection(&#123;<span class="attr">port</span>: <span class="number">3000</span>&#125;);</div><div class="line"></div><div class="line">server.route(&#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'/hello'</span>,</div><div class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</div><div class="line">    <span class="attr">handler</span>: <span class="function"><span class="keyword">function</span> (<span class="params">request, reply</span>) </span>&#123;</div><div class="line">        reply(<span class="string">'Hello World'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">server.start(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</div><div class="line">    <span class="keyword">if</span> (err) &#123;</div><div class="line">        <span class="keyword">throw</span> err;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">`Server running at <span class="subst">$&#123;server.info.uri&#125;</span>`</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>To run it open a CLI in your peoject folder and run <code>node server.js</code>, then browse to <a href="http://localhost:3000/hello" target="_blank" rel="external">http://localhost:3000/hello</a>.</p>
<h2 id="The-Server-Object"><a href="#The-Server-Object" class="headerlink" title="The Server Object"></a>The Server Object</h2><p>All routes, methods and plugins are an extension of the Server object.</p>
<h3 id="The-Server-Constructor"><a href="#The-Server-Constructor" class="headerlink" title="The Server Constructor"></a>The Server Constructor</h3><p>Optional Config object: see <a href="http://hapijs.com/api#server" target="_blank" rel="external">API Doc</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Hapi = <span class="built_in">require</span>(<span class="string">'hapi'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> server = <span class="keyword">new</span> Hapi.server( &#123;</div><div class="line">    <span class="attr">cache</span>: <span class="built_in">require</span>(<span class="string">'catbox-memory'</span>),</div><div class="line">    <span class="attr">files</span>: &#123;</div><div class="line">        <span class="attr">etagsCacheMaxSize</span>: <span class="number">20000</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="The-Connection-method"><a href="#The-Connection-method" class="headerlink" title="The Connection method"></a>The Connection method</h3><p>Connection Config object: see <a href="http://hapijs.com/api#serverconnectionoptions" target="_blank" rel="external">API Doc</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> mainServer = server.connection( &#123;</div><div class="line">    <span class="attr">port</span>: <span class="number">8000</span>,</div><div class="line">    <span class="attr">cache</span>: &#123;</div><div class="line">        <span class="attr">statuses</span>: [<span class="number">200</span>, <span class="number">404</span>],</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">labels</span>: <span class="string">'main'</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="The-server-ext-function"><a href="#The-server-ext-function" class="headerlink" title="The server.ext function"></a>The server.ext function</h3><p>Register handlers for certain events in the request life-cycle. See <a href="http://hapijs.com/api#serverextevent-method-options" target="_blank" rel="external">API Doc</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//onRequest, onPreAuth, onPostAuth, onPreHandler, onPostHandler, onPreResponse</span></div><div class="line">server.ext(<span class="string">'onRequest'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">request, reply</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Incoming request at '</span> + request.path);</div><div class="line">    reply.continue();</div><div class="line">&#125;);</div><div class="line">server.ext(<span class="string">'onPreResponse'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">request, reply</span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Responding'</span>);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'Response: '</span> + request.response);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Routing"><a href="#Routing" class="headerlink" title="Routing"></a>Routing</h2><p>Each <a href="http://hapijs.com/api#serverrouteoptions" target="_blank" rel="external">route</a> is defined by a <a href="http://hapijs.com/api#route-configuration" target="_blank" rel="external">route configuration</a> object containing <a href="http://hapijs.com/api#path-parameters" target="_blank" rel="external">path</a>, method and handler.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">server.route(&#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'/'</span>,	<span class="comment">//must begin with /</span></div><div class="line">    method: <span class="string">'GET'</span>, <span class="comment">// string, array ['GET', 'PUT'] or * - HEAD not supported</span></div><div class="line">    handler: &#123; <span class="comment">//Anonymous or named function or object with preset handler properties</span></div><div class="line">        file: <span class="string">'templates/index.html'</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line">server.route(&#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'/assets/&#123;path*&#125;'</span>,</div><div class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</div><div class="line">    <span class="attr">handler</span>: &#123;</div><div class="line">        <span class="attr">directory</span>: &#123;</div><div class="line">            <span class="attr">path</span>: <span class="string">'./public'</span>,</div><div class="line">            <span class="attr">listing</span>: <span class="literal">false</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="The-Request-Object"><a href="#The-Request-Object" class="headerlink" title="The Request Object"></a>The Request Object</h3><p>Encapsuled data about the incoming request.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//requested URL /api/customers/1?showAddress=false</span></div><div class="line">server.route(&#123;</div><div class="line">    <span class="attr">path</span>: <span class="string">'/api/customers/&#123;id&#125;'</span>,</div><div class="line">    <span class="attr">method</span>: <span class="string">'GET'</span>,</div><div class="line">    <span class="attr">handler</span>: <span class="function"><span class="keyword">function</span> (<span class="params">request, reply</span>) </span>&#123;</div><div class="line">    	<span class="comment">//request.params.id = 1</span></div><div class="line">        <span class="comment">//request.query.showAddress = false</span></div><div class="line">        <span class="comment">//request.auth.isAuthenticated, request.auth.credentials.email</span></div><div class="line">        <span class="comment">//request.info -&gt; contains more metainfo about request</span></div><div class="line">        <span class="comment">//request.info.remoteAddress -&gt; client IP address</span></div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h3 id="The-Reply-interface"><a href="#The-Reply-interface" class="headerlink" title="The Reply interface"></a>The Reply interface</h3><p>Give control back to server for replying and for constructing the response.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">handler: <span class="function"><span class="keyword">function</span> (<span class="params">request, reply</span>) </span>&#123;</div><div class="line">    reply(); <span class="comment">// give back control. Server responds with 200 status only</span></div><div class="line">    reply(<span class="string">'Hello World!'</span>); <span class="comment">//replies with string Hello World!</span></div><div class="line">    <span class="comment">// Using Response Object, set content type, headers etc</span></div><div class="line">    <span class="keyword">var</span> response = reply(<span class="string">'Hello World!'</span>);</div><div class="line">    response.statusCode = <span class="number">123</span>;</div><div class="line">    response.charset(<span class="string">'utf-8'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="reply-file"><a href="#reply-file" class="headerlink" title="reply.file"></a>reply.file</h4><p>Takes a path as argument and returns that file as a response. Useful when you have to do business logic before responding with a file.<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">handler: <span class="function"><span class="keyword">function</span> (<span class="params">request, reply</span>) </span>&#123;</div><div class="line">    reply.file(<span class="string">'/templates/index.html'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="reply-redirect"><a href="#reply-redirect" class="headerlink" title="reply.redirect"></a>reply.redirect</h4><p>Takes a URL as argument and redirect client to the passed URL. Useful when you POST and DELETEs on a website.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">handler: <span class="function"><span class="keyword">function</span> (<span class="params">request, reply</span>) </span>&#123;</div><div class="line">    <span class="comment">// business logic</span></div><div class="line">    reply.redirect(<span class="string">'/customers'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="reply-view"><a href="#reply-view" class="headerlink" title="reply.view"></a>reply.view</h4><p>Takes template name string param and optional context object. Used after registering a view engine with the server.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">handler: <span class="function"><span class="keyword">function</span> (<span class="params">request, reply</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> data = &#123;<span class="attr">companyName</span>: <span class="string">'Attracs'</span>&#125;;</div><div class="line">    reply.view(<span class="string">'customer'</span>, data);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="reply-proxy"><a href="#reply-proxy" class="headerlink" title="reply.proxy"></a>reply.proxy</h4><p>Generates a reverse proxy handler. Take a look at the proxy option in the documentation for <a href="http://hapijs.com/api#built-in-handlers" target="_blank" rel="external">Built-in Handlers</a></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">handler: &#123;</div><div class="line">    <span class="attr">proxy</span>: &#123;</div><div class="line">        <span class="comment">//or uri: 'http://...'</span></div><div class="line">        host: <span class="string">'my-other-service.mydomain.com'</span>,</div><div class="line">        <span class="attr">port</span>: <span class="number">80</span>,</div><div class="line">        <span class="attr">protocol</span>: <span class="string">'http'</span>,</div><div class="line">        <span class="attr">passThrough</span>: <span class="literal">true</span>,</div><div class="line">        <span class="attr">xforward</span>: <span class="literal">true</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>More <a href="http://blog.abcedmindedness.com/2015/03/hapijs-for-proxy-routes-and-mapuri.html" target="_blank" rel="external">here</a></p>
<h2 id="Templating"><a href="#Templating" class="headerlink" title="Templating"></a>Templating</h2><h3 id="Registering-a-View-Engine"><a href="#Registering-a-View-Engine" class="headerlink" title="Registering a View Engine"></a>Registering a View Engine</h3><p>You can use Handlebars, Jade, Swig, Ejs, Hogan and Underscore among other templating libraries.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">server.views(&#123;</div><div class="line">    <span class="attr">engines</span>: &#123;</div><div class="line">        <span class="attr">html</span>: <span class="built_in">require</span>(<span class="string">'jade'</span>),</div><div class="line">        <span class="attr">handlebars</span>: <span class="built_in">require</span>(<span class="string">'handlebars'</span>)</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">path</span>: <span class="string">'./templates'</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Common-Plugins"><a href="#Common-Plugins" class="headerlink" title="Common Plugins"></a>Common Plugins</h2><ul>
<li><a href="https://github.com/hapijs/boom" target="_blank" rel="external">Boom</a> - HTTP-friendly error objects</li>
<li><a href="https://github.com/hapijs/good" target="_blank" rel="external">Good</a> is a hapi process monitoring library</li>
<li><a href="https://github.com/hapijs/joi" target="_blank" rel="external">Joi</a> is an object schema validation library.</li>
<li><a href="https://github.com/hapijs/wreck" target="_blank" rel="external">Wreck</a> is an http utility library</li>
<li><a href="https://github.com/glennjones/hapi-swagger" target="_blank" rel="external">hapi-swagger</a> is a <a href="http://swagger.io/" target="_blank" rel="external">swagger</a> interface for hapi.</li>
<li><a href="https://github.com/hapijs/vision" target="_blank" rel="external">vision</a> provides template rendering support for hapi.</li>
<li><a href="https://github.com/hapijs/glue" target="_blank" rel="external">glue</a> - Server composer for hapi.js</li>
<li><a href="https://github.com/hapijs/inert" target="_blank" rel="external">inert</a> is a static file and directory handlers plugin for hapi.js.</li>
<li><a href="https://github.com/danielb2/blipp" target="_blank" rel="external">Blipp</a> is  a simple hapi plugin to display the routes table at startup</li>
</ul>
<h2 id="Testing"><a href="#Testing" class="headerlink" title="Testing"></a>Testing</h2><p>I’ll do a separate post on this one day. For now I’ll just list some resources:</p>
<ul>
<li>[Lab](<a href="https://github.com/hapijs/lab" target="_blank" rel="external">https://github.com/hapijs/lab</a> is a testrunner often used with hapi.</li>
<li><a href="https://github.com/hapijs/code" target="_blank" rel="external">Code</a> assertion library<br><a href="https://medium.com/the-spumko-suite/testing-hapi-services-with-lab-96ac463c490a" target="_blank" rel="external">Testing Hapi Services with Lab</a><br><a href="http://robjoh.com/testing-a-server-request-with-hapi-and-lab/" target="_blank" rel="external">Testing backend requests with hapi and lab</a></li>
</ul>
<h2 id="Other-Resources"><a href="#Other-Resources" class="headerlink" title="Other Resources"></a>Other Resources</h2><ul>
<li><a href="http://manning.com/harrison" target="_blank" rel="external">hapi.js in Action</a> book and <a href="https://github.com/mtharrison/Hapi.js-in-action" target="_blank" rel="external">repo</a></li>
<li><a href="http://shop.oreilly.com/product/9781939902207.do" target="_blank" rel="external">Developing a hapi edge</a> book and it’s <a href="https://github.com/hapijs-edge/hapi-plugins.com" target="_blank" rel="external">repo</a>.</li>
<li><a href="https://github.com/caolan/async" target="_blank" rel="external">async</a> library</li>
<li><a href="http://matt-harrison.com/using-hapi-js-with-socket-io/" target="_blank" rel="external">Using hapi.js with Socket.io</a></li>
<li><a href="https://gist.github.com/agendor/9922151" target="_blank" rel="external">A practical introduction to building a RESTful API with the hapi.js server framework for Node.js<br>Raw</a></li>
<li><a href="https://github.com/johnbrett/Getting-Started-with-hapi.js" target="_blank" rel="external">Getting started with hapi.js Repo</a></li>
<li><a href="https://github.com/hapijs/contrib/blob/master/Style.md" target="_blank" rel="external">hapi Coding Conventions</a></li>
<li>Getting started with hapi.js book <a href="https://github.com/johnbrett/Getting-Started-with-hapi.js" target="_blank" rel="external">sample code repo</a></li>
<li>FutureStudio has great <a href="https://futurestud.io/blog/tag/hapi" target="_blank" rel="external">posts on hapi</a></li>
<li><a href="https://hapibook.jjude.com/" target="_blank" rel="external">hapi with TypeScript</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kajlund.net/2016/04/25/typescript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaj Lund">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/luka.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kajlund.net">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/04/25/typescript/" itemprop="url">TypeScript</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-04-25T18:25:30+03:00">
                2016-04-25
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2017-06-11T15:53:11+03:00">
                2017-06-11
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/TypeScript/" itemprop="url" rel="index">
                    <span itemprop="name">TypeScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li>Is a superset of ECMAScript</li>
<li>Allow definition of strong types</li>
<li>Understands the basics of JavaScript types</li>
</ul>
<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm install -g typescript</div><div class="line">tsc -v</div></pre></td></tr></table></figure>
<h3 id="Setting-Up-VS-Code-for-TypeScript"><a href="#Setting-Up-VS-Code-for-TypeScript" class="headerlink" title="Setting Up VS Code for TypeScript"></a>Setting Up VS Code for TypeScript</h3><ul>
<li>Create a folder</li>
<li>Open folder with VS Code</li>
<li>Create TypeScript Configuration File (tsconfig.json)</li>
<li>Configure Task Runner</li>
</ul>
<h3 id="tsconfig-json"><a href="#tsconfig-json" class="headerlink" title="tsconfig.json"></a>tsconfig.json</h3><p>tsconfig.json is a json file that defines the options for the tsc compiler. The prescense of this file in a folder indicates that it is the root folder of a TypeScript project.</p>
<p>Typescript Build in VS Code Ctrl+Shit+B -&gt; Configure Task Runner creates .settings/tasks.json</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">	<span class="string">"compilerOptions"</span>: &#123;</div><div class="line">		<span class="string">"target"</span>: <span class="string">"ES5"</span></div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Configure-Task-Runner"><a href="#Configure-Task-Runner" class="headerlink" title="Configure Task Runner"></a>Configure Task Runner</h3><p>In VS Code press <code>Ctrl-Shift-B</code> to build. If there is no build task has been configured you’ll get a dialog containing a button to create a default one by clicking <code>Configure Task Runner</code>.</p>
<p>In VS Code automation tasks will be stored in a file called <code>tasks.json</code> in the <code>.vscode</code> folder.</p>
<h2 id="Installing-Angular-Type-Definitions"><a href="#Installing-Angular-Type-Definitions" class="headerlink" title="Installing Angular Type Definitions"></a>Installing Angular Type Definitions</h2><p>From a CLI in the project root folder type:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tsd install angular --resolve --save</div></pre></td></tr></table></figure>
<p>This will install type definitions for both angular and jQuery.</p>
<h2 id="Some-Resources"><a href="#Some-Resources" class="headerlink" title="Some Resources"></a>Some Resources</h2><ul>
<li><a href="http://www.typescriptlang.org/" target="_blank" rel="external">Website</a></li>
<li><a href="http://definitelytyped.org/" target="_blank" rel="external">Definitely Typed</a> - The repository for high quality TypeScript type definitions</li>
<li><a href="https://app.pluralsight.com/library/courses/angular-typescript/table-of-contents" target="_blank" rel="external">Kurata Pluralsight Course</a></li>
<li><a href="https://www.gitbook.com/book/basarat/typescript/details" target="_blank" rel="external">TypeScript Deep Dive</a></li>
<li><a href="http://blog.teamtreehouse.com/getting-started-typescript" target="_blank" rel="external">Getting Started with TypeScript</a></li>
<li><a href="https://www.packtpub.com/web-development/mastering-typescrip" target="_blank" rel="external">Mastering TypeScript</a></li>
<li><a href="http://alm.tools/" target="_blank" rel="external">ALM</a> - A cloud ready IDE for TypeScript</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kajlund.net/2015/09/29/angular-ui-router/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaj Lund">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/luka.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kajlund.net">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/09/29/angular-ui-router/" itemprop="url">Angular Routing with ui-router</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-09-29T18:25:30+03:00">
                2015-09-29
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2017-06-11T16:05:47+03:00">
                2017-06-11
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AngularJS/" itemprop="url" rel="index">
                    <span itemprop="name">AngularJS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>UI-Router is a state based library as opposed to the default routing library that is URL-based. Using ngRoute a route is always associated with a particular URL. In UI-router states can exist without a URL. States can also be nested.</p>
<blockquote>
<p>A state is a combination of a controller and a view that can exist independently from any particular URL - A state is a “place” in an application.</p>
</blockquote>
<h2 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h2><h3 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h3><p>There are a couple of ways to install</p>
<ul>
<li>Install via package manager <code>bower install angular-ui-router</code> or <code>npm install angular-ui-router</code> or <code>jspm install angular-ui-router</code></li>
<li>Use a CDN like Cloudflare</li>
<li>Download from the github project</li>
</ul>
<h3 id="Setup-UI-Router"><a href="#Setup-UI-Router" class="headerlink" title="Setup UI_Router"></a>Setup UI_Router</h3><p>Once you have access to the JavaScript file you need to add ui.router as a module dependency and add the ui-view dircetive to your html.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>UI-Router demo<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">ng-app</span>=<span class="string">"app"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ui-view</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"libs/angular.js/1.4.6/angular.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"libs/angular-ui-router/0.2.15/angular-ui-router.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    angular.module(<span class="string">'app'</span>, [<span class="string">'ui.router'</span>]);</div><div class="line">&#125;)();</div></pre></td></tr></table></figure>
<h2 id="Configuring-States"><a href="#Configuring-States" class="headerlink" title="Configuring States"></a>Configuring States</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"> angular.module(<span class="string">'app'</span>).config(configRoutes);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">configRoutes</span>(<span class="params">$stateProvider, $urlRouterProvider</span>) </span>&#123;</div><div class="line">    $urlRouterProvider.otherwise(<span class="string">'/'</span>);</div><div class="line"></div><div class="line">    $stateProvider</div><div class="line">        .state(<span class="string">'home'</span>, &#123;</div><div class="line">            <span class="attr">url</span>: <span class="string">'/'</span>,</div><div class="line">            <span class="attr">controller</span>: <span class="string">'HomeController'</span>,</div><div class="line">            <span class="attr">controllerAs</span>: <span class="string">'vm'</span>,</div><div class="line">            <span class="attr">templateUrl</span>: <span class="string">'app/home.html'</span>,</div><div class="line">            <span class="attr">resolve</span>: &#123;</div><div class="line">                <span class="comment">//allMyData will be injected into HomeController if promise resolved</span></div><div class="line">                allMyData: <span class="function"><span class="keyword">function</span> (<span class="params">dataService</span>) </span>&#123;</div><div class="line">                    <span class="keyword">return</span> dataService.getAllMyData();</div><div class="line">                    <span class="comment">//throw 'Emulate state change failure'</span></div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The command <code>$urlRouterProvider.otherwise(&#39;/&#39;)</code> defines a “catch all” route making sure that if a user enters an invalid URL (invalid state or invalid param value) he will be routed to ‘/’.</p>
<blockquote>
<p>Since the views are bound to states you don’t have to provide a URL (no change in address bar) to change the view but that might also be confusing in some cases.</p>
</blockquote>
<h3 id="Activating-States"><a href="#Activating-States" class="headerlink" title="Activating States"></a>Activating States</h3><p>In JavaScript code you would use <code>$state.go(&#39;home&#39;);</code> to change to the home state. In templates you can use both normal href links <code>&lt;a href=&quot;/home&quot;&gt;Home&lt;/a&gt;</code> and the ui-sref directive <code>&lt;a ui-sref=&quot;home&quot;&gt;Home&lt;/a&gt;</code>. If the state doesn’t have a particular URL you must obviously use the ui-sref directive.</p>
<h2 id="Using-the-state-Service"><a href="#Using-the-state-Service" class="headerlink" title="Using the $state Service"></a>Using the $state Service</h2><h3 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$state.go()     - $state.go(&apos;statename&apos;, &#123;id: 1, another: &apos;two&apos;&#125;);</div><div class="line">$state.reload() - reloads the current state</div><div class="line">$state.get()    - retrieve a state object by name or all states</div></pre></td></tr></table></figure>
<h3 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h3><ul>
<li>current - currently active state</li>
<li>params  - object containing params for current state</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyController</span> (<span class="params">$state, $log, allMyData</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> vm = <span class="keyword">this</span>;</div><div class="line">        vm.data = allMyData;</div><div class="line">    $log.debug(<span class="string">'Activated state '</span>, $state.current);</div><div class="line"></div><div class="line">    vm.refresh = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        $log.debug(<span class="string">'Reloaded state '</span>, $state.current);</div><div class="line">        $state.reload();</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h3><ul>
<li>$stateChangeError</li>
<li>$stateChangeStart</li>
<li>$stateChangeSuccess</li>
<li>$stateNotFound</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">runApp</span> (<span class="params">$rootScope, $log</span>) </span>&#123;</div><div class="line">    $rootScope.$on(<span class="string">'$stateChangeSuccess'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event, toState, toParams, fromState, fromParams</span>) </span>&#123;</div><div class="line">        $log.debug(<span class="string">'Successfully changed state: '</span>);</div><div class="line"></div><div class="line">        $log.debug(<span class="string">'event'</span>, event);</div><div class="line">        $log.debug(<span class="string">'toState'</span>, toState);</div><div class="line">        $log.debug(<span class="string">'toParams'</span>, toParams);</div><div class="line">        $log.debug(<span class="string">'fromState'</span>, fromState);</div><div class="line">        $log.debug(<span class="string">'fromParams'</span>, fromParams);</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    $rootScope.$on(<span class="string">'$stateNoFound'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event, unfoundState, fromState, fromParams</span>) </span>&#123;</div><div class="line">        $log.debug(<span class="string">'Requested state not found: '</span>, unfoundState);</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    $rootScope.$on(<span class="string">'$stateChangeError'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event, toState, toParams, fromState, fromParams, error</span>) </span>&#123;</div><div class="line">        $log.debug(<span class="string">'An error occurred while changing state: '</span>, error);</div><div class="line"></div><div class="line">        $log.debug(<span class="string">'event'</span>, event);</div><div class="line">        $log.debug(<span class="string">'toState'</span>, toState);</div><div class="line">        $log.debug(<span class="string">'toParams'</span>, toParams);</div><div class="line">        $log.debug(<span class="string">'fromState'</span>, fromState);</div><div class="line">        $log.debug(<span class="string">'fromParams'</span>, fromParams);</div><div class="line">    &#125;);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="State-Parameters"><a href="#State-Parameters" class="headerlink" title="State Parameters"></a>State Parameters</h2><p>You can declare state params in the url param of the route configuration:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">.state(<span class="string">'tripdetail'</span>, &#123;</div><div class="line">   <span class="attr">url</span>: <span class="string">'/tripdetail/:id'</span></div><div class="line">&#125;)</div><div class="line">...</div><div class="line"></div><div class="line">function TripDetailController ($stateParams) &#123;</div><div class="line">    <span class="keyword">var</span> vm = <span class="keyword">this</span>;</div><div class="line">    vm.tripId = $stateParams.id;</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>With UI-Router there are also other options:</p>
<p>Using curly braces works the same way but allows you to enter a regex. The parameter will only be set if it matches the regex.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">.state(<span class="string">'tripdetail'</span>, &#123;</div><div class="line">   <span class="attr">url</span>: <span class="string">'/tripdetail/&#123;id:[0-9]&#125;'</span></div><div class="line">&#125;)</div><div class="line">...</div></pre></td></tr></table></figure>
<p>The third option is to use the params property on the state configuration object. This allows you to give default values to the params or to declare params that doesn’t exist in the URL.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">.state(<span class="string">'tripdetail'</span>, &#123;</div><div class="line">    <span class="attr">url</span>: <span class="string">'/tripdetail/&#123;id:[0-9]&#125;'</span>,</div><div class="line">    <span class="attr">params</span>: &#123;</div><div class="line">        <span class="attr">secretMessage</span>: &#123;<span class="attr">value</span>: <span class="string">'Shhh!'</span>&#125;</div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line">...</div><div class="line"></div><div class="line">function TripDetailController ($stateParams) &#123;</div><div class="line">    <span class="keyword">var</span> vm = <span class="keyword">this</span>;</div><div class="line">    vm.tripId = $stateParams.id;</div><div class="line">    vm.message = $stateParams.secretMessage; <span class="comment">// cannot be passed via URL</span></div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>In templates you pass route parameters in an object literal as a parameter to the ui-sref state value <code>&lt;a ui-sref=&quot;tripdetail({id: 1234, secretMessage: &#39;New message&#39;})&quot;&gt;Detail&lt;/a&gt;</code></p>
<p>In code you pass an object literal as the second argument to the $state.go function <code>$state.go({id: 1234, secretMessage: &#39;New message&#39;});</code>.</p>
<h3 id="Additional-State-Configuration-Properties"><a href="#Additional-State-Configuration-Properties" class="headerlink" title="Additional State Configuration Properties"></a>Additional State Configuration Properties</h3><p>Similar to the ngRoute resolve property you call a function returning a promise. The promise must be resolved before the state change will occur. The name of the resolve function is what you will inject to the controller.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">.state(<span class="string">'triplist'</span>, &#123;</div><div class="line">    <span class="attr">url</span>: <span class="string">'/trips'</span>,</div><div class="line">    <span class="attr">resolve</span>: &#123;</div><div class="line">        <span class="attr">trips</span>: <span class="function"><span class="keyword">function</span> (<span class="params">dataService</span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> dataService.getAllTrips();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line">...</div></pre></td></tr></table></figure>
<p>You can also assign data to the states. You don’t need to call it data but it is a convention. State data is inherited by child-states:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">.state(<span class="string">'triplist'</span>, &#123;</div><div class="line">    <span class="attr">url</span>: <span class="string">'/trips'</span>,</div><div class="line">    <span class="attr">data</span>: &#123;</div><div class="line">        <span class="attr">name</span>: <span class="string">'Trip List'</span>,</div><div class="line">        <span class="attr">desc</span>: <span class="string">'Whatever'</span></div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line">...</div><div class="line">$log.debug($state.current.data);</div></pre></td></tr></table></figure>
<p>Templates can be assigned via a function to the templateUrl property which makes it easy to dynamically determine what template to use. You can also use the injectable templateProvider property. Controllers have similar options.</p>
<p>The onEnter and onExit properties can hold callback functions that will execute when a state is entered or exited.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">.state(<span class="string">'triplist'</span>, &#123;</div><div class="line">    <span class="attr">url</span>: <span class="string">'/trips'</span>,</div><div class="line">    <span class="attr">onEnter</span>: <span class="function"><span class="keyword">function</span> (<span class="params">$log</span>) </span>&#123;</div><div class="line">        $log.debug(<span class="string">'Entering triplist state'</span>);</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">onExit</span>: <span class="function"><span class="keyword">function</span> (<span class="params">$log</span>) </span>&#123;</div><div class="line">        $log.debug(<span class="string">'Exiting triplist state'</span>);</div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line">...</div></pre></td></tr></table></figure>
<h2 id="Nested-States-and-Views"><a href="#Nested-States-and-Views" class="headerlink" title="Nested States and Views"></a>Nested States and Views</h2><p>Combined these features allow you to build complex views from simpler parts. nested states works a bit like inheritance where child states inherit from parent states.</p>
<p>For nested states, state properties including the URL is inherited to child states.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">.state(<span class="string">'book'</span>, &#123;</div><div class="line">    <span class="attr">abstract</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">url</span>: <span class="string">'/book/:id'</span>,</div><div class="line">    <span class="attr">resolve</span>: &#123;&#125;,</div><div class="line">    <span class="attr">data</span>: &#123;&#125;,</div><div class="line">    <span class="attr">template</span>: <span class="string">'&lt;div ui-view&gt;'</span></div><div class="line">&#125;)</div><div class="line">.state(<span class="string">'book.summary'</span>, &#123;</div><div class="line">    <span class="attr">url</span>: <span class="string">'/summary'</span>,</div><div class="line">    <span class="attr">templateUrl</span>: <span class="string">'book.summary'</span></div><div class="line">&#125;)</div><div class="line">.state(<span class="string">'bookDetail'</span>, &#123;</div><div class="line">    <span class="attr">url</span>: <span class="string">'/detail'</span>,</div><div class="line">    <span class="attr">parent</span>: <span class="string">'book'</span>, <span class="comment">// or book state object</span></div><div class="line">    templateUrl: <span class="string">'book.detail.html'</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>To define a child state you either repeat the parent state name, followed by a dot, followed by the child state name like above. You can also instead add the property parent to the child state definition and give it a string or literal value of the parent state.</p>
<p>The view templates defined in child view definitions will be rendered in their parent’s view template’s ui-view directive, not in the ui-view directive defined for the app.</p>
<h3 id="Abstract-States"><a href="#Abstract-States" class="headerlink" title="Abstract States"></a>Abstract States</h3><p>A specialiced version of parent state that can’t be activated directly. They are implicitly activated by activating any of their child states. If an abstact state specifies a URL any child state’s URL will be prepended with it. It can be used as an abstraction for gathering resolves and data you wish to be available in all child states. You can also use it for sharing part of the view for all child states.</p>
<h3 id="Multiple-Named-Views"><a href="#Multiple-Named-Views" class="headerlink" title="Multiple Named Views"></a>Multiple Named Views</h3><p>Allows you to define multiple views for a single state. This can be useful for separating views and controllers to keep them smaller and more maintainable and also if you need to reuse part of a view in different places throughout your app. You do this by defining a views object on the state configuration object.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">.state(<span class="string">'book'</span>, &#123;</div><div class="line">    <span class="attr">abstract</span>: <span class="literal">true</span>,</div><div class="line">    <span class="attr">templateUrl</span>: <span class="string">'app/book.html'</span>,</div><div class="line">    <span class="attr">url</span>: <span class="string">'/book/:id'</span>,</div><div class="line">    <span class="attr">resolve</span>: &#123;&#125;,</div><div class="line">    <span class="attr">data</span>: &#123;&#125;</div><div class="line">&#125;)</div><div class="line">.state(<span class="string">'book.summary'</span>, &#123;</div><div class="line">    <span class="attr">url</span>: <span class="string">'/summary'</span>,</div><div class="line">    <span class="attr">views</span>: &#123;</div><div class="line">        <span class="string">'bookSummary'</span>: &#123;</div><div class="line">            <span class="attr">templateUrl</span>: <span class="string">'app/book.summary.html'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;)</div><div class="line">.state(<span class="string">'bookDetail'</span>, &#123;</div><div class="line">    <span class="attr">url</span>: <span class="string">'/detail'</span>,</div><div class="line">    <span class="attr">parent</span>: <span class="string">'book'</span>, <span class="comment">// or book state object</span></div><div class="line">    views: &#123;</div><div class="line">        <span class="string">'bookSummary'</span>: &#123;</div><div class="line">            <span class="attr">templateUrl</span>: <span class="string">'app/book.summary.html'</span></div><div class="line">        &#125;,</div><div class="line">        <span class="string">'bookDetail'</span>: &#123;</div><div class="line">            <span class="attr">templateUrl</span>: <span class="string">'app/book.detail.html'</span></div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>and the template book.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>I will be here for all my children<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ui-view</span>=<span class="string">"bookSummary"</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">div</span> <span class="attr">ui-view</span>=<span class="string">"bookDetail"</span>&gt;</span></div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kajlund.net/2015/09/28/angular-ng-route/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaj Lund">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/luka.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kajlund.net">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/09/28/angular-ng-route/" itemprop="url">Angular Routing with ng-route</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-09-28T18:23:23+03:00">
                2015-09-28
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2017-06-11T16:06:05+03:00">
                2017-06-11
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AngularJS/" itemprop="url" rel="index">
                    <span itemprop="name">AngularJS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="(http://www.pluralsight.com/courses/angular-routing-in-depth">Course page on Pluralsight</a>)</p>
<p>ngRoute is the default router used by AngularJS and it is URL-based as opposed to the state based alternative UI-Router</p>
<h2 id="Preparation"><a href="#Preparation" class="headerlink" title="Preparation"></a>Preparation</h2><h5 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h5><p>There are a couple of ways to install</p>
<ul>
<li>Install via package manager <code>bower install angular-route</code> or <code>npm install angular-route</code></li>
<li>Using <a href="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.0/angular-route.js" target="_blank" rel="external">Googles CDN</a> or <a href="https://cdnjs.com/libraries/angular.js" target="_blank" rel="external">CDNJS</a></li>
<li>Download any version directly from the <a href="https://code.angularjs.org" target="_blank" rel="external">AngularJS site</a></li>
</ul>
<h5 id="Setup-ngRoute"><a href="#Setup-ngRoute" class="headerlink" title="Setup ngRoute"></a>Setup ngRoute</h5><p>Once you have access to the JavaScript file you need to add <code>ngRoute</code> as a module dependency and add the <code>ng-view</code> dircetive to your html.</p>
<ul>
<li>reference in html file: <code>&lt;script src=&quot;lib/angular-route.js&quot;&gt;&lt;/script&gt;</code></li>
<li>add module dependency in app module: <code>angular.module(&#39;app&#39;, [&#39;ngRoute&#39;]);</code></li>
<li>add ng-view directive to html page: <code>&lt;div ng-view&gt;&lt;/div&gt;</code></li>
</ul>
<h2 id="Configuring-Routes"><a href="#Configuring-Routes" class="headerlink" title="Configuring Routes"></a>Configuring Routes</h2><p>Services are configured via their providers inside a module config function. For ngRoute the provider is called $routeProvider.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">'app'</span>, [<span class="string">'ngRoute'</span>]);</div><div class="line">angular.module(<span class="string">'app'</span>).config(<span class="function"><span class="keyword">function</span> (<span class="params">$logProvider, $routeProvider</span>) </span>&#123;</div><div class="line">    $logProvider.debugEnabled(<span class="literal">true</span>);</div><div class="line"></div><div class="line">    $routeProvider</div><div class="line">        .when(<span class="string">'/'</span>, &#123;</div><div class="line">            <span class="attr">controller</span>: <span class="string">'HomeController'</span>, <span class="comment">// alt 'HomeController as vm'</span></div><div class="line">            controllerAs: <span class="string">'vm'</span>,</div><div class="line">            <span class="comment">// template: '&lt;h1&gt;Hello World!&lt;/h1&gt;',</span></div><div class="line">            templateUrl: <span class="string">'app/home/home.html'</span>,</div><div class="line">            <span class="attr">caseInsesitiveMatch</span>: <span class="literal">true</span></div><div class="line">        &#125;)</div><div class="line">        .when(<span class="string">'/this'</span>, &#123; <span class="attr">redirectTo</span>: <span class="string">'/that'</span>&#125;)</div><div class="line">        .when(<span class="string">'/that/:id'</span>, &#123;</div><div class="line">            <span class="attr">redirectTo</span>: <span class="function"><span class="keyword">function</span> (<span class="params">params, currPath, currSearch</span>) </span>&#123;</div><div class="line">               <span class="built_in">console</span>.log(params);</div><div class="line">               <span class="built_in">console</span>.log(currPath);</div><div class="line">               <span class="built_in">console</span>.log(currSearch);</div><div class="line">               <span class="keyword">return</span> <span class="string">'/'</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">        .otherwise(<span class="string">'/'</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Using-the-route-Service"><a href="#Using-the-route-Service" class="headerlink" title="Using the $route Service"></a>Using the $route Service</h2><h5 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h5><ul>
<li>reload() -reloads the current route</li>
<li>updateParams(newParams) - reload using new route params</li>
</ul>
<h5 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h5><ul>
<li>current - can examine controller, scope and vars</li>
<li>routes - contains all route definitions for the app</li>
</ul>
<h5 id="Events"><a href="#Events" class="headerlink" title="Events"></a>Events</h5><ul>
<li>$routeChangeStart</li>
<li>$routeChangeSuccess</li>
<li>$routeChangeError</li>
<li>$routeUpdate</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">'app'</span>)</div><div class="line">    controller(<span class="string">'HomeController'</span>, HomeController);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">HomeController</span> (<span class="params">$route, $log</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> vm = <span class="keyword">this</span>;</div><div class="line"></div><div class="line">    vm.refresh = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        $log.debug($route.current);</div><div class="line">        $log.debug($route.routes);</div><div class="line">        $route.reload();</div><div class="line">    &#125;;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">'app'</span>)</div><div class="line">    run(<span class="function"><span class="keyword">function</span> (<span class="params">$rootScope, $log</span>) </span>&#123;</div><div class="line">        $rootScope.$on(<span class="string">'$routeChangeSuccess'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event, current, previous</span>) </span>&#123;</div><div class="line">            $log.debug(<span class="string">'Successfully changed route'</span>);</div><div class="line">            $log.debug(event);</div><div class="line">            $log.debug(current);</div><div class="line">            $log.debug(previous);</div><div class="line">        &#125;);</div><div class="line"></div><div class="line">        $rootScope.$on(<span class="string">'$routeChangeError'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event, current, previous, rejection</span>) </span>&#123;</div><div class="line">            $log.debug(<span class="string">'Error changing route'</span>);</div><div class="line">            $log.debug(event);</div><div class="line">            $log.debug(current);</div><div class="line">            $log.debug(previous);</div><div class="line">            $log.debug(rejection);  <span class="comment">// Why did it fail?</span></div><div class="line">        &#125;);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<h2 id="Route-Parameters"><a href="#Route-Parameters" class="headerlink" title="Route Parameters"></a>Route Parameters</h2><p>The $routeParams service holds information on paramaters. You can have several and they can be optional by adding the question mark as a postfix.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// .when('/test/:myVar')</span></div><div class="line"><span class="comment">// .when('/test/:myVar/other/:that?')</span></div><div class="line"></div><div class="line"><span class="keyword">var</span> myVar = $routeParams.myVar,</div><div class="line">    that = $routeParams.that;</div><div class="line"></div><div class="line"><span class="comment">// You can check for params if different routes share controller</span></div><div class="line"><span class="keyword">if</span> ($routeParams.that) &#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="The-Location-Service"><a href="#The-Location-Service" class="headerlink" title="The Location Service"></a>The Location Service</h5><p>Use to get or set values in address bar.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">vm.search = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> newUrl = <span class="string">'/this/'</span> + vm.myVar + <span class="string">'/other/'</span> + $routeParams.that;</div><div class="line">    $location.url(newUrl);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h5 id="The-resolve-property"><a href="#The-resolve-property" class="headerlink" title="The resolve property"></a>The resolve property</h5><ul>
<li>List of dependencies to inject into the controller</li>
<li>If returning promise the promise must be resolved before transition can take place</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">.when(<span class="string">'/'</span>, &#123;</div><div class="line">    <span class="attr">controller</span>: <span class="string">'HomeController'</span>,</div><div class="line">    <span class="attr">controllerAs</span>: <span class="string">'vm'</span>,</div><div class="line">    <span class="attr">templateUrl</span>: <span class="string">'app/home.html'</span>,</div><div class="line">    <span class="attr">resolve</span>: &#123;</div><div class="line">        <span class="attr">dataList</span>: <span class="function"><span class="keyword">function</span> (<span class="params">dataService</span>) </span>&#123;</div><div class="line">            <span class="keyword">return</span> dataService.getAllData();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">HomeController</span> (<span class="params">dataList</span>) </span>&#123;</div><div class="line">    <span class="keyword">var</span> vm = <span class="keyword">this</span>;</div><div class="line">        vm.dataList = dataList;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="URL-Formats"><a href="#URL-Formats" class="headerlink" title="URL Formats"></a>URL Formats</h2><p>Default mode is called hashbang mode and looks like <a href="http://localhost:3000/#/home" target="_blank" rel="external">http://localhost:3000/#/home</a>. Everything to the right of the hash symbol belongs to client side routing handled by Angular.</p>
<p>The alternative is called HTML5 mode and looks like <a href="http://localhost:3000/home" target="_blank" rel="external">http://localhost:3000/home</a>. In HTML5 mode angular attempts to use the browser’s HTML5 History API. With some configuration Angular can handle url changes even without the hash sign.</p>
<table>
<thead>
<tr>
<th>Hashbang Mode</th>
<th>HTML 5 Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td>Default mode</td>
<td>Must be configured with $locationProvider</td>
</tr>
<tr>
<td>All URLs contain #</td>
<td>No # sign except in older browsers not supporting HTML5 History API</td>
</tr>
<tr>
<td>Links are not rewritten</td>
<td>Links with # are rewritten without the # in modern browsers</td>
</tr>
<tr>
<td>No server-side config</td>
<td>Servers must rewrite links to application entry point</td>
</tr>
</tbody>
</table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">angular.module(<span class="string">'app'</span>)</div><div class="line">    .config(<span class="function"><span class="keyword">function</span> (<span class="params">$locationProvider</span>) </span>&#123;</div><div class="line">        <span class="comment">//$locationProvider.hashPrefix('!'); // True hashbang mode #!/</span></div><div class="line">        $locationProvider.html5Mode(<span class="literal">true</span>); <span class="comment">//or</span></div><div class="line">        $locationProvider.html5Mode(&#123;</div><div class="line">            <span class="attr">enabled</span>: <span class="literal">true</span>,</div><div class="line">            <span class="attr">requireBase</span>: <span class="literal">true</span>, <span class="comment">//require base tag in html head &lt;base href="/"&gt;</span></div><div class="line">            rewriteLinks: <span class="literal">true</span>  <span class="comment">//rewrite links as necessary</span></div><div class="line">        &#125;);</div><div class="line">    &#125;);</div></pre></td></tr></table></figure>
<p>If you now type a bad URL in the address bar it won’t be handled by angular but by the web server unless the web server routes everything back to the index.html file.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kajlund.net/2015/09/22/karma/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaj Lund">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/luka.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kajlund.net">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/09/22/karma/" itemprop="url">The Karma Testrunner</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-09-22T18:25:30+03:00">
                2015-09-22
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2017-06-11T16:00:55+03:00">
                2017-06-11
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Testing/" itemprop="url" rel="index">
                    <span itemprop="name">Testing</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Karma is a test runner (built on nodejs by the AngularJS team) that can run tests from a variety of testing frameworks like qUnit, Jasmine and Mocha. It has built-in support for common CI-tools.</p>
<p>It spawns a browser instance (or multiple different browser instances) and runs the tests against the different browser instances to see if the tests pass under different browser environments.</p>
<p>Karma is capable of communicating with several different browsers natively and removes the need for us to manually test our code in different browsers. Karma supports both Unit Testing and E2E Testing.</p>
<p>Run via a command or watch for changes and run automatically. Single runs are good for CI and watch can be useful when developing.</p>
<h4 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h4><ul>
<li><a href="http://karma-runner.github.io/" target="_blank" rel="external">Webpage</a> and <a href="https://github.com/karma-runner/karma" target="_blank" rel="external">github page</a></li>
<li><a href="http://toon.io/how-to-setup-karma-javascript-test-runner/" target="_blank" rel="external">Article on Setup</a></li>
</ul>
<h2 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">npm install -g karma</div><div class="line">npm install --save-dev karma</div></pre></td></tr></table></figure>
<p>Karma has a generator to help us build the configuration file. To run it type <code>karma init</code> and follow the instructions.</p>
<p>The <code>karma init</code> command asks some questions and generates the file <code>karma.conf.js</code>. You can modify it later if you make some bad choices initially.</p>
<h4 id="Add-System-Variables-on-Windows"><a href="#Add-System-Variables-on-Windows" class="headerlink" title="Add System Variables on Windows"></a>Add System Variables on Windows</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CHROME_BIN</div><div class="line">C:\Program Files (x86)\Google\Chrome\Application\chrome.exe</div><div class="line"></div><div class="line">FIREFOX_BIN</div><div class="line">C:\Program Files (x86)\Mozilla Firefox\firefox.exe</div></pre></td></tr></table></figure>
<h3 id="Starting-Karma"><a href="#Starting-Karma" class="headerlink" title="Starting Karma"></a>Starting Karma</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">karma start</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kajlund.net/2015/09/19/nodejs-intro/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaj Lund">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/luka.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kajlund.net">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/09/19/nodejs-intro/" itemprop="url">Node.js intro</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-09-19T18:25:30+03:00">
                2015-09-19
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2017-06-11T15:54:47+03:00">
                2017-06-11
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/NodeJS/" itemprop="url" rel="index">
                    <span itemprop="name">NodeJS</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>An intro to nodejs picked up from Sovelto course plus <a href="http://beta.pluralsight.com/courses/node-intro" target="_blank" rel="external">Introduction to Node.js</a> and <a href="http://beta.pluralsight.com/courses/nodejs-dotnet-developers" target="_blank" rel="external">Node.js for .NET Developers</a></p>
<p>Node.js is a server-side JavaScript platform introduced by Ryan Dahl at JSConf in 2009.</p>
<p>The Node.js platform consists of:</p>
<ul>
<li>libuv - High performance, cross-platform evented I/O library</li>
<li>V8 - Google’s JavaScript engine</li>
<li>libraries built in C++ and JS</li>
</ul>
<p>Node.js binaries and installers are available at <a href="http://nodejs.org/download" target="_blank" rel="external">http://nodejs.org/download</a></p>
<p>There is also a multiple versions manager called <strong>nvm</strong> available at <a href="https://github.com/creationix/nvm" target="_blank" rel="external">https://github.com/creationix/nvm</a>.</p>
<p>You can develop node apps using pretty much any text editor or use an online IDE like <a href="https://c9.io/" target="_blank" rel="external">Cloud9</a>.</p>
<h5 id="A-Hello-World-Web-Server"><a href="#A-Hello-World-Web-Server" class="headerlink" title="A Hello World Web Server"></a>A Hello World Web Server</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</div><div class="line">http.createServer(<span class="function"><span class="keyword">function</span> (<span class="params">req, res</span>) </span>&#123;</div><div class="line">  res.writeHead(<span class="number">200</span>, &#123;<span class="string">'Content-Type'</span>: <span class="string">'text/plain'</span>&#125;);</div><div class="line">  res.end(<span class="string">'hello world\n'</span>);</div><div class="line">&#125;).listen(<span class="number">8000</span>, <span class="string">"127.0.0.1"</span>);</div></pre></td></tr></table></figure>
<p>To run it enter: <code>node server.js</code> and open the <a href="http://127.0.0.1:8000/" target="_blank" rel="external">web browser</a> to view it.</p>
<h2 id="The-Event-Loop"><a href="#The-Event-Loop" class="headerlink" title="The Event Loop"></a>The Event Loop</h2><p>Node’s uses a non-blocking, event loop that constantly listens for events like internal events, timers or external events like tcp or http events.</p>
<h2 id="Node’s-Programming-Model"><a href="#Node’s-Programming-Model" class="headerlink" title="Node’s Programming Model"></a>Node’s Programming Model</h2><p>Node depends on using asynchronous code which is a bit different to the synchronous model that most programmers are more familiar with.</p>
<p>Since most calls in node are asynchronous execution often uses the <em>callback</em> pattern but you can also use the <em>publish-subscribe</em> pattern.</p>
<h3 id="Callbacks"><a href="#Callbacks" class="headerlink" title="Callbacks"></a>Callbacks</h3><ul>
<li>Callbacks use the <a href="http://en.wikipedia.org/wiki/Request-response" target="_blank" rel="external">request-response</a> communication pattern and returns an error or the result</li>
<li>Does not return anything until all done.</li>
<li>This method is often used because it is simpler compared to the options.</li>
<li>By convention the callback is the last fuction param</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> handleResults = <span class="function"><span class="keyword">function</span>(<span class="params">err, results</span>) </span>&#123;</div><div class="line">    <span class="comment">//Check for error</span></div><div class="line">    <span class="comment">//Handle result returned in results var</span></div><div class="line">&#125;</div><div class="line">doStuff(param, handleResults);</div><div class="line"></div><div class="line">doStuff(param, <span class="function"><span class="keyword">function</span> (<span class="params">err, items</span>) </span>&#123;</div><div class="line">    <span class="comment">//Check for error</span></div><div class="line">    <span class="comment">//Handle result returned in items var</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>The callback function can be a named function or an anonymous function</li>
<li>In node.js the function parameters generally look like:</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span>(<span class="params">arguments, callback</span>);</span></div></pre></td></tr></table></figure>
<ul>
<li>The callback gererally consists of: <code>callback(err, returnvalues);</code></li>
<li>The callback function can be defined separately or inline as an anonymous function.</li>
</ul>
<p>Using lots of callback tend to create the so called christmas tree problem resulting in code that is hard to debug and maintain.</p>
<h3 id="Publish-Subscribe"><a href="#Publish-Subscribe" class="headerlink" title="Publish/Subscribe"></a>Publish/Subscribe</h3><ul>
<li>Using the <a href="http://en.wikipedia.org/wiki/Publish/subscribe" target="_blank" rel="external">Publish/Subscribe</a> pattern you get the result in chunks and can start processing the result faster.</li>
<li>You might end up with getting some OK data before an error occurs.</li>
<li>The publish/subscribe model uses events for communicating results.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> result = doStuff(param);</div><div class="line">results.on(<span class="string">'item'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">i</span>) </span>&#123;</div><div class="line">    <span class="comment">//Handle chunk of data sent</span></div><div class="line">&#125;);</div><div class="line">results.on(<span class="string">'done'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="comment">//Done, no more data</span></div><div class="line">&#125;);</div><div class="line">results.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">err</span>) </span>&#123;</div><div class="line">    <span class="comment">//Handle error</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="The-Module-System"><a href="#The-Module-System" class="headerlink" title="The Module System"></a>The Module System</h2><p>You use modules to bring in external functionality to your application. You use the <code>require</code> function to load a module and assign it to a variable for use. Modules can explicitly export functionality (variables, functions, objects) for use in other modules. You can also import a single function from a library.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> foo = <span class="built_in">require</span>(<span class="string">'foo'</span>);</div><div class="line"><span class="keyword">var</span> Bar = <span class="built_in">require</span>(<span class="string">'bar'</span>); <span class="comment">//Initial capital meant to be instantiated</span></div><div class="line"><span class="keyword">var</span> one = <span class="built_in">require</span>(<span class="string">'library'</span>).one;</div><div class="line"></div><div class="line"><span class="keyword">var</span> f = <span class="number">2</span> + foo.someValue;</div><div class="line"><span class="keyword">var</span> b = <span class="keyword">new</span> Bar();</div><div class="line"><span class="built_in">console</span>.log(one());</div></pre></td></tr></table></figure>
<h3 id="Types-of-Modules"><a href="#Types-of-Modules" class="headerlink" title="Types of Modules"></a>Types of Modules</h3><ul>
<li><a href="http://nodejs.org/api" target="_blank" rel="external">Built-in Modules</a> (no need to require)</li>
<li>pre-packaged modules (must use require like fs, http…)</li>
</ul>
<h2 id="Event-Emitters"><a href="#Event-Emitters" class="headerlink" title="Event Emitters"></a>Event Emitters</h2><p>In the Publish/Subscribe scenario you have the subscriber (sample above) that subscribes and reacts to emitted events by the publisher.</p>
<p>The publisher is the part that emits events to the subscriber. The events are represented by strings. You can also send an arbitrary number of parameters with the event as needed.</p>
<p>A typical event emitter is an object that extends the <a href="http://nodejs.org/api/events.html#events_class_events_eventemitter" target="_blank" rel="external">EventEmitter</a> class and publishes needed events.</p>
<h2 id="Streams"><a href="#Streams" class="headerlink" title="Streams"></a>Streams</h2><p>A <a href="http://nodejs.org/api/stream.html" target="_blank" rel="external">stream</a> is an EventEmitter with an abstract interface. It is used throughout node for handling data flow scenarios like:</p>
<ul>
<li>Networking (http request/response, tcp socket)</li>
<li>File I/O</li>
<li>stdin/stdout/stderr</li>
</ul>
<p>A stream can be read-only (stream.Readable), write-only (stream.Writable) or both</p>
<h2 id="The-Process-Object"><a href="#The-Process-Object" class="headerlink" title="The Process Object"></a>The Process Object</h2><ul>
<li><a href="http://nodejs.org/api/process.html" target="_blank" rel="external">API Documentation</a></li>
</ul>
<h5 id="Streams-1"><a href="#Streams-1" class="headerlink" title="Streams"></a>Streams</h5><ul>
<li>process.stdin</li>
<li>process.stdout</li>
<li>process.stderr</li>
</ul>
<h5 id="Event-Emitters-1"><a href="#Event-Emitters-1" class="headerlink" title="Event Emitters"></a>Event Emitters</h5><ul>
<li>event ‘exit’</li>
<li>event ‘uncaughtException’</li>
<li>POSIX signal events (‘SIGINT’, etc )</li>
</ul>
<h5 id="Process-Info-like"><a href="#Process-Info-like" class="headerlink" title="Process Info like"></a>Process Info like</h5><ul>
<li>process.env</li>
<li>process.pid</li>
<li>process.title</li>
<li>process.uptime()</li>
<li>process.memoryUsage</li>
</ul>
<h5 id="Process-Commands-Like"><a href="#Process-Commands-Like" class="headerlink" title="Process Commands Like"></a>Process Commands Like</h5><ul>
<li>process.kill()</li>
</ul>
<h2 id="File-System"><a href="#File-System" class="headerlink" title="File System"></a>File System</h2><ul>
<li>The <a href="http://nodejs.org/api/fs.html" target="_blank" rel="external">File System</a> support is based on POSIX functionality, both async and sync versions of functions available</li>
<li>Streams<ul>
<li>fs.createReadStream()</li>
<li>fs.createWriteStream()</li>
</ul>
</li>
<li>File events - fs.FSWatcher<ul>
<li>watcher.close()</li>
<li>Event: ‘change’</li>
<li>Event: ‘error’</li>
</ul>
</li>
</ul>
<h2 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h2><ul>
<li>Traditionally JavaScript has not been good at handling binary data but it is needed by fileSystem and communication classes in node.</li>
<li>Buffer enables handling of binary data for these</li>
<li>A buffer can be converted to/from strings using different encodings like ascii, utf8 (default), utf16le, ucs2, base64, binary and hex.</li>
<li>Buffer thus also supports encoding and decoding strings to/from base64.</li>
</ul>
<h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h2><h3 id="Http-Request"><a href="#Http-Request" class="headerlink" title="Http Request"></a>Http Request</h3><p>The http protocol is supported by the <a href="http://nodejs.org/api/http.html" target="_blank" rel="external">http module</a>.</p>
<pre><code>var http = require(&apos;http&apos;),
    req = http.request(&apos;http://www.google.fi&apos;, function(resp) {
        console.log(resp.statusCode);
        console.log(&quot;headers: &quot;, resp.headers);
        resp.pipe(process.stdout);
    });
req.end();
</code></pre><ul>
<li>The req variable will contain a http.ClientRequest object</li>
<li>The resp variable will contain a http.ClientResponse object (ReadableStream)</li>
<li>The request method can be called with a url string or with an options object as parameter</li>
<li>Redirects will not be followed (use follow-redirects package)</li>
<li>Get requests can be simplified by using the get verb</li>
</ul>
<h3 id="A-Simple-Web-Server"><a href="#A-Simple-Web-Server" class="headerlink" title="A Simple Web Server"></a>A Simple Web Server</h3><pre><code>var http = require(&apos;http&apos;),
host = process.env.IP || &apos;127.0.0.1&apos;,
port = process.env.PORT || 8080;

http.createServer(function (req, res) {
    res.writeHead(200, { &apos;Content-Type&apos;: &apos;text/plain&apos; });
    res.end(&apos;Hello World\n&apos;);
}).listen(port, host);
console.log(&apos;Server running at &apos; + host + &apos;:&apos; + port);
</code></pre><ul>
<li>The req variable contains http.ServerRequest (ReadableStream)</li>
<li>The res variable contains http.ServerResponse (WritableStream)</li>
<li>The request can be handled in a callback as above or or using events</li>
<li>You can also use https instead of using http</li>
</ul>
<h3 id="WebSocket"><a href="#WebSocket" class="headerlink" title="WebSocket"></a>WebSocket</h3><ul>
<li>Two-way real time communication protocol</li>
<li>Part of html5 W3C &amp; IETF standard</li>
<li>Low latency</li>
<li>Low bandwidth</li>
</ul>
<p>Supported on Windows for IE10+ .NET4.5, Win 8 Metro, Windows Server 2012. For .NET developers there is the SignalR framework.</p>
<p>Browser support <a href="http://caniuse.com/websockets" target="_blank" rel="external">here</a></p>
<ul>
<li>Node supports it via <strong>socket.io</strong></li>
</ul>
<h4 id="WebSocket-Sample"><a href="#WebSocket-Sample" class="headerlink" title="WebSocket Sample"></a>WebSocket Sample</h4><h5 id="Server"><a href="#Server" class="headerlink" title="Server"></a>Server</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> io = <span class="built_in">require</span>(<span class="string">'socket.io'</span>).listen(<span class="number">80</span>);</div><div class="line"></div><div class="line">io.sockets.on(<span class="string">'connection'</span>),</div><div class="line">    <span class="function"><span class="keyword">function</span> (<span class="params">socket</span>) </span>&#123;</div><div class="line">        socket.emit(<span class="string">'data'</span>, &#123;<span class="attr">hello</span>: <span class="string">'World'</span>&#125;);</div><div class="line"></div><div class="line">        socket.on(<span class="string">'clientData'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">            <span class="built_in">console</span>.log(data);</div><div class="line">    &#125;);</div><div class="line"> );</div></pre></td></tr></table></figure>
<h5 id="Client"><a href="#Client" class="headerlink" title="Client"></a>Client</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&lt;script src=&quot;socket.io.js&quot;&gt;&lt;/script&gt;</div><div class="line">&lt;script&gt;</div><div class="line">    var s = io.connect(&apos;http://.&apos;);</div><div class="line">    s.on(&apos;data&apos;, function (data) &#123;</div><div class="line">        console.log(data);</div><div class="line">        s.emit(&apos;clientData&apos;, &#123;my: &apos;Data&apos;&#125;);</div><div class="line">    &#125;);</div><div class="line">&lt;/script&gt;</div></pre></td></tr></table></figure>
<h3 id="Frameworks"><a href="#Frameworks" class="headerlink" title="Frameworks"></a>Frameworks</h3><ul>
<li>Most commonly used node web framework is <a href="http://expressjs.com/" target="_blank" rel="external">express</a></li>
<li>For ORM there is <a href="http://sequelizejs.com" target="_blank" rel="external">Sequelize</a></li>
<li>Using node with <a href="http://www.windowsazure.com/en-us/develop/nodejs/tutorials/web-site-with-sql-database/" target="_blank" rel="external">Windows Azure Database</a></li>
</ul>
<h2 id="Testing-Node-js"><a href="#Testing-Node-js" class="headerlink" title="Testing Node.js"></a>Testing Node.js</h2><ul>
<li>Basic unit testing is built in using the assert module</li>
<li>For BDD style testing you can use <a href="https://github.com/visionmedia/should.js/" target="_blank" rel="external">should.js</a> and <a href="http://visionmedia.github.io/mocha/" target="_blank" rel="external">Mocha</a></li>
</ul>
<h3 id="The-assert-Module"><a href="#The-assert-Module" class="headerlink" title="The assert Module"></a>The assert Module</h3><ul>
<li>A built-in module for unit testing</li>
<li>Test for (in)equality between expected and actual values</li>
<li>Test whether a block of code throws (or doesn’t throw) an exception <code>throw new Error()</code></li>
<li>Test for the “truthiness” of a value</li>
<li>Test whether the “error” parameter was passed to a callback</li>
<li>Each assertion can contain an output message on failure</li>
</ul>
<h5 id="Equality"><a href="#Equality" class="headerlink" title="Equality"></a>Equality</h5><ul>
<li><code>assert.equal()</code> : shallow i.e. coercive equality(==)</li>
<li><code>assert.strictEqual()</code> : strict equality (===)</li>
<li><code>assert.deepEqual()</code> :<ul>
<li>coercive equality</li>
<li>Non-Objects are coercively tested</li>
<li>Date objects must have same date/time</li>
<li>Other objects (incl. Array). Same amount of properties, checking keys &amp; values plus that prototypes match.</li>
</ul>
</li>
</ul>
<h3 id="BDD-style-testing"><a href="#BDD-style-testing" class="headerlink" title="BDD style testing"></a>BDD style testing</h3><p>For BDD style testing you can use the should.js library and the <a href="http://visionmedia.github.io/mocha/" target="_blank" rel="external">Mocha</a> testrunner.</p>
<ul>
<li>Can run tests in specified order, both synch and asynch</li>
<li>You can group tests into suites</li>
<li>Tests are run using Mocha from the command line. You can run only a specified suite</li>
</ul>
<h3 id="should-js"><a href="#should-js" class="headerlink" title="should.js"></a>should.js</h3><p>should.js extends the assert module with <a href="http://en.wikipedia.org/wiki/Behavior-driven_development" target="_blank" rel="external">BDD</a> style testing</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> should = <span class="built_in">require</span>(<span class="string">'should'</span>),</div><div class="line">    user = &#123;<span class="attr">name</span>: <span class="string">'tj'</span>, <span class="attr">pets</span>: [<span class="string">'tobi'</span>, <span class="string">'loki'</span>, <span class="string">'jane'</span>, <span class="string">'bandit'</span>]&#125;;</div><div class="line"></div><div class="line">user.should.have.property(<span class="string">'name'</span>, <span class="string">'tj'</span>);</div><div class="line">user.should.have.property(<span class="string">'pets'</span>).with.lengthOf(<span class="number">4</span>);</div><div class="line"><span class="comment">// or without Object.prototype, for guys how did Object.create(null)</span></div><div class="line">should(user).have.property(<span class="string">'name'</span>, <span class="string">'tj'</span>);</div><div class="line">should(<span class="literal">true</span>).ok;</div><div class="line">someAsyncTask(foo, <span class="function"><span class="keyword">function</span>(<span class="params">err, result</span>) </span>&#123;</div><div class="line">    should.not.exist(err);</div><div class="line">    should.exist(result);</div><div class="line">    result.bar.should.equal(foo);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Deployment-Environments"><a href="#Deployment-Environments" class="headerlink" title="Deployment Environments"></a>Deployment Environments</h2><p>Node.js runs in a single thread so multiple processor cores typically does not help. The solution is to use multiple node processes.</p>
<ul>
<li>The <code>spawn</code> command starts a new process</li>
<li>The <code>exec</code> command runs in a command shell and takes callback</li>
<li>execFile is like exec but for running a specific file</li>
<li>In IIS use <a href="https://github.com/tjanczuk/iisnode" target="_blank" rel="external">iisnode</a></li>
</ul>
<h3 id="iisnode"><a href="#iisnode" class="headerlink" title="iisnode"></a>iisnode</h3><p>iisnode is a native IIS module that allows hosting of node.js applications in IIS on Windows.</p>
<ul>
<li><strong>Process management</strong>. The iisnode module takes care of lifetime management<br>of node.exe processes making it simple to improve overall reliability. You don’t<br>have to implement infrastructure to start, stop, and monitor the processes.</li>
<li><p><strong>Side by side with other content types</strong>. The iisnode module integrates with IIS in<br>a way that allows a single web site to contain a variety of content types. For<br>example, a single site can contain a node.js application, static HTML and<br>JavaScript files, PHP applications, and ASP.NET applications. This enables<br>choosing the best tools for the job at hand as well progressive migration of<br>existing applications.</p>
</li>
<li><p><strong>Scalability on multi-core servers</strong>. Since node.exe is a single threaded process, it<br>only scales to one CPU core. The iisnode module allows creation of multiple<br>node.exe processes per application and load balances the HTTP traffic between<br>them, therefore enabling full utilization of a server’s CPU capacity without<br>requiring additional infrastructure code from an application developer.</p>
</li>
<li><p><strong>Integrated debugging</strong>. With iisnode integrated debugging you can debug<br>your node.js application deployed to IIS from a browser running on<br>Windows, Mac, or Linux. You get this support out of the box, no extra<br>configuration or installation is necessary. The solution is designed in a<br>way that is shared hosting, firewall, and proxy friendly. The integrated<br>debugging in iisnode uses node-inspector by Danny Coates.</p>
</li>
<li><p><strong>Auto-update</strong>. The iisnode module ensures that whenever the node.js<br>application is updated (i.e. the script file has changed), the node.exe<br>processes are recycled. Ongoing requests are allowed to gracefully finish<br>execution using the old version of the application, while all new requests<br>are dispatched to the new version of the app.</p>
</li>
<li><p><strong>Access to logs over HTTP</strong>. The iisnode module provides access the<br>output of the node.exe process (e.g. generated by console.log calls) via<br>HTTP. This facility is key in helping you debug node.js applications<br>deployed to remote servers.</p>
</li>
<li><p><strong>Minimal changes to node.js application code</strong>. The iisnode module<br>enables hosting of existing HTTP node.js applications with very minimal<br>changes. Typically all that is required is to change the listed address of<br>the HTTP server to one provided by the iisnode module via the<br>process.env.PORT environment variable.</p>
</li>
<li><p><strong>Integrated management experience</strong>. The issnode module is fully<br>integrated with IIS configuration system and uses the same tools and<br>mechanism as other IIS components for configuration and maintenance.</p>
</li>
<li><p><strong>Other IIS benefits</strong>. Port sharing, security, URL rewriting, compression,<br>caching, logging</p>
</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kajlund.net/2015/09/07/api-design/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaj Lund">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/luka.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kajlund.net">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/09/07/api-design/" itemprop="url">REST API Design</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-09-07T18:25:30+03:00">
                2015-09-07
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2017-06-11T16:05:32+03:00">
                2017-06-11
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/APIs/" itemprop="url" rel="index">
                    <span itemprop="name">APIs</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>The basics of API design picked up by watching the PluralSight API Design Course<br>by Shawn Wildermuth.</p>
<p><strong>See also</strong>: HTTP Response Codes are defined in <a href="https://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html" target="_blank" rel="external">W3C RFC2616</a>. <a href="http://jsonapi.org/" target="_blank" rel="external">jsonapi.org</a> has info on standard ways of representing data.</p>
<p>The way APIs are designed is important because:</p>
<ul>
<li>APIs are the UI layer to developers</li>
<li>Easy to use APIs are more readily adopted</li>
<li>Picking the right level of API is crucial to success</li>
<li>Don’t surprise your users</li>
<li>Balance what is good for the user with what is good for the server</li>
<li>Ultimately, users are what make a successful API</li>
</ul>
<blockquote>
<p>There is no real right or wrong way. Just avoid dogma and be pragmatic.</p>
</blockquote>
<h2 id="URIs"><a href="#URIs" class="headerlink" title="URIs"></a>URIs</h2><ul>
<li>Nouns are good, verbs are bad.</li>
<li>URIs should point at nouns (e.g. resources)</li>
<li>Prefer plural form</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">http://api/Customers</div><div class="line">http://api/Invoices</div></pre></td></tr></table></figure>
<p>Use identifiers to locate individual items in URIs. Doesn’t have to be internal key as long as it is unique.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">http://api/Customers/123</div><div class="line">http://api/Games/halo-3</div><div class="line">http://api/Invoices/2014-01-01</div></pre></td></tr></table></figure>
<h2 id="HTTP-Verbs"><a href="#HTTP-Verbs" class="headerlink" title="HTTP Verbs"></a>HTTP Verbs</h2><table>
<thead>
<tr>
<th>Resource</th>
<th>GET</th>
<th>POST</th>
<th>PUT</th>
<th>DELETE</th>
</tr>
</thead>
<tbody>
<tr>
<td>/customers</td>
<td>Get list</td>
<td>Create item</td>
<td>Update batch</td>
<td>Error</td>
</tr>
<tr>
<td>/customers/123</td>
<td>Get item</td>
<td>Error</td>
<td>Update item</td>
<td>Delete item</td>
</tr>
</tbody>
</table>
<p><strong>What to Return</strong></p>
<table>
<thead>
<tr>
<th>Resource</th>
<th>GET</th>
<th>POST</th>
<th>PUT</th>
<th>DELETE</th>
</tr>
</thead>
<tbody>
<tr>
<td>/customers</td>
<td>List</td>
<td>New item</td>
<td>Status code</td>
<td>Error code</td>
</tr>
<tr>
<td>/customers/123</td>
<td>Item</td>
<td>Error code</td>
<td>Updated item</td>
<td>Status code</td>
</tr>
</tbody>
</table>
<h2 id="Status-Codes"><a href="#Status-Codes" class="headerlink" title="Status Codes"></a>Status Codes</h2><p>The HTTP specification defines the status codes. Below are some common ones:</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
</tr>
<tr>
<td>201</td>
<td>Created</td>
</tr>
<tr>
<td>202</td>
<td>Accepted</td>
</tr>
<tr>
<td>302</td>
<td>Found</td>
</tr>
<tr>
<td>304</td>
<td>Not Modified</td>
</tr>
<tr>
<td>307</td>
<td>Temp Redirect</td>
</tr>
<tr>
<td>308</td>
<td>Perm Redirect</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
</tr>
<tr>
<td>401</td>
<td>Not Authorized</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed</td>
</tr>
<tr>
<td>409</td>
<td>Conflict</td>
</tr>
<tr>
<td>500</td>
<td>Internal Error</td>
</tr>
</tbody>
</table>
<p>Limit the number of returned status codes to keep the API simple. <strong>Consider these as a bare minimum</strong>:</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
<th>Real Story</th>
</tr>
</thead>
<tbody>
<tr>
<td>200</td>
<td>OK</td>
<td>It Worked</td>
</tr>
<tr>
<td>400</td>
<td>Bad Request</td>
<td>Your Bad</td>
</tr>
<tr>
<td>500</td>
<td>Internal Error</td>
<td>Our Bad</td>
</tr>
</tbody>
</table>
<p><strong>The following could be useful for clients</strong>:</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>201</td>
<td>Created</td>
</tr>
<tr>
<td>304</td>
<td>Not Modified</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
</tr>
<tr>
<td>404</td>
<td>Not Found</td>
</tr>
</tbody>
</table>
<p><strong>Sample of Sensible Defaults:</strong></p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>200 OK</td>
<td>Successful request</td>
</tr>
<tr>
<td>204</td>
<td>No Content    File contains no data</td>
</tr>
<tr>
<td>301</td>
<td>Moved Permanently    The requested resource has permanently moved to another address</td>
</tr>
<tr>
<td>401</td>
<td>Not Authorized    Athorization needed to access resource</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden</td>
</tr>
<tr>
<td>404</td>
<td>Not Found    The requested resource cannot be found</td>
</tr>
<tr>
<td>408</td>
<td>Request Timeout. The Request timed out</td>
</tr>
<tr>
<td>500</td>
<td>Server Error</td>
</tr>
</tbody>
</table>
<h2 id="Associations"><a href="#Associations" class="headerlink" title="Associations"></a>Associations</h2><p>Using URIs</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">http:<span class="comment">//api/Customers/123/Invoices</span></div><div class="line">http:<span class="comment">//api/Games/halo-3/Ratings</span></div><div class="line">http:<span class="comment">//api/Invoices/2014-01-01/Payments</span></div></pre></td></tr></table></figure>
<p>Returns single object or list of objects. The format should be the same as when loading associated objects as when loading them as main resources. A resource may include multiple associations:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">http:<span class="comment">//api/Customers/123/Invoices</span></div><div class="line">http:<span class="comment">//api/Customers/123/Payments</span></div><div class="line">http:<span class="comment">//api/Customers/123/Shipments</span></div></pre></td></tr></table></figure>
<p><strong>For more complex needs use query params</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http:<span class="comment">//api/Customers/123/Invoices?date=2014-0101&amp;type=credit</span></div></pre></td></tr></table></figure>
<h2 id="Formatting-the-Results"><a href="#Formatting-the-Results" class="headerlink" title="Formatting the Results"></a>Formatting the Results</h2><ul>
<li>Single Results should be simple objects</li>
<li>Member names should not expose server details and be camelCased or at least be consistent.</li>
<li>Collections typically use an object wrapping a simple collection to hold information about the collection and not just the items.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"total"</span>: <span class="number">120</span>,</div><div class="line">    <span class="string">"results"</span>: [</div><div class="line">        &#123;<span class="string">"id"</span>: <span class="number">1</span>,...&#125;, ...</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Response-Formats"><a href="#Response-Formats" class="headerlink" title="Response Formats"></a>Response Formats</h3><ul>
<li>Content negotiation is a best practice. Use Accept header to determine format. <code>Accept: application/json, text/xml</code></li>
<li>Can use URIs to specify format but not recommended. Use only if you need to use clients that cannot use headers.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">http:<span class="comment">//api/Customers?format=json</span></div><div class="line">http:<span class="comment">//api/Customers.json</span></div><div class="line">http:<span class="comment">//api/Customers?format=json&amp;callback=foo</span></div></pre></td></tr></table></figure>
<ul>
<li>Not necessary to support lots of formats. Use a sane default, usually JSON.</li>
</ul>
<table>
<thead>
<tr>
<th>Type</th>
<th>MIME Type</th>
</tr>
</thead>
<tbody>
<tr>
<td>JSON</td>
<td>application/json</td>
</tr>
<tr>
<td>XML</td>
<td>text/xml</td>
</tr>
<tr>
<td>JSONP</td>
<td>application/javascript</td>
</tr>
<tr>
<td>RSS</td>
<td>application/xml+rss</td>
</tr>
<tr>
<td>ATOM</td>
<td>application/xml+atom</td>
</tr>
</tbody>
</table>
<h3 id="Entity-Tags-ETags"><a href="#Entity-Tags-ETags" class="headerlink" title="Entity Tags (ETags)"></a>Entity Tags (ETags)</h3><ul>
<li>ETags are used to support smart server caching</li>
<li>Supports both strong and weak caching and are typically returned in the response header</li>
<li>The ETag represents a version of the results returned</li>
<li>Weak ETags means results are semantically the same whereas strong ETag suggests they are byte by byte identical. Weak ETags are prefixed with W/.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">HTTP/1.1 200 OK</div><div class="line">Content-Type:application/json; charset=utf-8</div><div class="line">Date: 20-01-2014 16:46:52 GMT</div><div class="line">ETag: &quot;8934675928367085&quot;</div><div class="line">Content-Length: 1024</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">HTTP/1.1 200 OK</div><div class="line">Content-Type:application/json; charset=utf-8</div><div class="line">Date: 20-01-2014 16:46:52 GMT</div><div class="line">ETag: W/&quot;8934675928367085&quot;</div><div class="line">Content-Length: 1024</div></pre></td></tr></table></figure>
<ul>
<li><p>Client sends along ETag with request to check for new data.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">GET /api/customers/123 HTTP/1.1</div><div class="line">Accept: application/json</div><div class="line">Host: localhost:8863</div><div class="line">If-None-Match: &quot;8934675928367085&quot;</div></pre></td></tr></table></figure>
</li>
<li><p>If the above request would result in the same object the server returns a 304 Not Modified with an empty body.</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">HTTP/1.1 304 Not Modified</div></pre></td></tr></table></figure>
<ul>
<li>For PUTs you can use If-Match to check that the object you want to save hasn’t been modified.</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">PUT /api/customers/123 HTTP/1.1</div><div class="line">Accept: application/json</div><div class="line">Host: localhost:8863</div><div class="line">If-Match: &quot;8934675928367085&quot;</div><div class="line">...</div></pre></td></tr></table></figure>
<ul>
<li>If server has matching ETag for object then PUT should be allowed otherwise the PUT should return <code>412 Precondition Failed</code> and client needs to GET a more recent version before trying to PUT again.</li>
</ul>
<h3 id="Paging"><a href="#Paging" class="headerlink" title="Paging"></a>Paging</h3><ul>
<li>Lists should always support paging for restricting the amount of data sent over the network to the client and for reducing the amount of work the server does for a single request.</li>
<li>Use query string parameters for paging information. For instance pageSize is typical for allowing the client to determine how many he wants/call.</li>
<li>Commonly use the list object wrapper for next/prev links</li>
<li>Return totalSize of the dataset so that the client can calculate how many pages there would be.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">http:<span class="comment">//api/games/?page=2&amp;pageSize=50</span></div><div class="line"></div><div class="line">&#123;</div><div class="line">    <span class="string">"total"</span>: <span class="number">1598</span>,</div><div class="line">    <span class="string">"next"</span>: <span class="string">"http://api/Invoices/?page=3"</span>,</div><div class="line">    <span class="string">"prev"</span>: <span class="string">"http://api/Invoices/?page=1"</span>,</div><div class="line">    <span class="string">"results"</span>: [...]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<ul>
<li>Set an upper limit for pageSize to something reasonable for the server to process at any one time.</li>
</ul>
<h3 id="Partials"><a href="#Partials" class="headerlink" title="Partials"></a>Partials</h3><ul>
<li>APIs should allow for requesting partial items. This can significantly reduce data traffic.</li>
<li>Allowing the client to specify what fields it needs in a particular case.</li>
<li>Using the query string is a common pattern <code>http://api/invoices/123?fields=id,invoiceDate,totalAmount</code></li>
<li>Updating of partial items could be supported with the PATCH verb</li>
<li>Updating partials would be safer if you implement ETag support</li>
</ul>
<h2 id="Non-Resource-APIs"><a href="#Non-Resource-APIs" class="headerlink" title="Non-Resource APIs"></a>Non-Resource APIs</h2><ul>
<li>Handling of the functional parts of the API that cannot easily be solved by using resources and HTTP verbs.</li>
<li>Be pragmatic and document these parts properly</li>
<li>API user should be able to distingguish these types of operations from the normal usage of resources</li>
<li>Usually handled by calling get requests and functional, not resource based</li>
<li>Don’t use an an excuse to build RPC API</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">http:/&amp;/api/calculateTax?state=GA&amp;total=149.90</div></pre></td></tr></table></figure>
<h2 id="API-Versioning"><a href="#API-Versioning" class="headerlink" title="API Versioning"></a>API Versioning</h2><ul>
<li>A published API is a contract and should not be changed. Client rely on a fix API or they will break.</li>
<li>Versioning is a way of evolving the API without breaking existing clients</li>
<li>Don’t tie API versioning to product versions</li>
<li>No best way of versioning APIs but we can learn from existing ones</li>
</ul>
<h3 id="Versioning-Styles"><a href="#Versioning-Styles" class="headerlink" title="Versioning Styles"></a>Versioning Styles</h3><ul>
<li>Using URI path <code>http://api.tumblr.com/v2/user/</code> like Tumblr.</li>
<li>Using a Query param <code>http://api.netflix.com/catalog/titles/series/70023522?v=1.5</code> like Netflix</li>
<li>Using content negotiation: <code>Content-Type: application/vnd.github.1.param+json</code> like GitHub</li>
<li>Using a request header: <code>x-ms-version:2011-08-18</code> like Windows Azure</li>
</ul>
<h3 id="Versioning-using-the-URI-path"><a href="#Versioning-using-the-URI-path" class="headerlink" title="Versioning using the URI path"></a>Versioning using the URI path</h3><ul>
<li>Everything after the version number is open to change</li>
<li>Allows for drastic changes</li>
<li>Simple to segregate old APIs for backwards compatibility</li>
<li>Could require lots of client changes as you version</li>
<li>Increases the size of the URI surface area you have to support</li>
<li>Can expand reach but also icrease technical debt</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">http://api.attracs.com/v1/Customers?type=Current&amp;id=123</div><div class="line">http://api.attracs.com/v2/CurrentCustomers/123</div></pre></td></tr></table></figure>
<h3 id="Versioning-using-Query-Param"><a href="#Versioning-using-Query-Param" class="headerlink" title="Versioning using Query Param"></a>Versioning using Query Param</h3><ul>
<li>Version can be an optional parameter. Latest version by default</li>
<li>Doesn’t impose huge client changes as versions mature.</li>
<li>You can surprise developers with unexpected changes and break clients</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">http://api.attracs.com/Customers</div><div class="line">http://api.attracs.com/Customers?v=2.1</div></pre></td></tr></table></figure>
<h3 id="Versioning-using-Content-Negotiation"><a href="#Versioning-using-Content-Negotiation" class="headerlink" title="Versioning using Content Negotiation"></a>Versioning using Content Negotiation</h3><ul>
<li>Becoming increasingly popular because the versioning is separated from the API surface area.</li>
<li>Packages API and Resource Versioning together. Versioning can be tied to specific resources</li>
<li>Client don’t have to change URIs</li>
<li>Adds complexity. Some clients may not be able to use headers</li>
<li>Can encourage increased versioning and overall complexity</li>
</ul>
<p>Use custom MIME types in header. Standard indicates you should use “vnd.” (meaning vendor) as prefix to the MIME type</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">GET /Customers/123</div><div class="line">HOST:http://api.attracs.com</div><div class="line">Accept: application/vnd.amc.v1.customer</div><div class="line"></div><div class="line">Accept: application/vnd.amc.v1.customer.json</div></pre></td></tr></table></figure>
<h3 id="Versioning-using-Custom-Header"><a href="#Versioning-using-Custom-Header" class="headerlink" title="Versioning using Custom Header"></a>Versioning using Custom Header</h3><ul>
<li>Use a header value that is only recognised by the API</li>
<li>Common to use date instead of a version number</li>
<li>Separates versioning from API call signatures</li>
<li>Not tied to resource versioning</li>
<li>Adds complexity. Some clients may not be able to use headers</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">GET /Customers/123</div><div class="line">HOST:http://api.attracs.com</div><div class="line">x-AMC-Version: 2.1</div><div class="line"></div><div class="line">x-AMC-Version: 2014-01-01</div></pre></td></tr></table></figure>
<p>It’s hard to generally say which style is best. Content Negotiation and Custom Header styles are popular but adds some complexity. Versioning with URI components are still more common. These are typically easier to implement but can add more technical debt.</p>
<p>The API should support versioning from the first release.</p>
<h3 id="Resource-Versioning"><a href="#Resource-Versioning" class="headerlink" title="Resource Versioning"></a>Resource Versioning</h3><ul>
<li>Versioning API calls isn’t enough. The resources themselves should be versioned too because structures and constraints change over time.</li>
<li>Versioning resources is easier using custom content types</li>
<li>Including versioning data in the resource body is an option, but it pollutes the data</li>
</ul>
<h2 id="Securing-the-API"><a href="#Securing-the-API" class="headerlink" title="Securing the API"></a>Securing the API</h2><ul>
<li>Security should be part of the original design. don’t patch it on as an afterthought.</li>
<li>Should be secure by default. Don’t return sensitive information before authorized</li>
</ul>
<p><strong>You need to secure the API if:</strong></p>
<ul>
<li>You’re using personalized or private data</li>
<li>Sending sensitive data across the wire</li>
<li>Using credentials of any kind</li>
<li>Protecting against overuse of servers</li>
</ul>
<p><strong>Threats:</strong></p>
<ul>
<li>Eavesdroppers (packet sniffers etc)</li>
<li>Hackers or even personnel (Intrusion and physical security)</li>
<li>Users/Hackers looking at source for accessing the API</li>
</ul>
<p>Securing the server infrastructure is another topic</p>
<p>Secure In-Transit (protecting data when it goes across the wire). Using SSL is typically worth the expense</p>
<p>Securing the API consists of Cross-Origin Security and Authorization/Authentication.</p>
<h3 id="Cross-Domain-Security"><a href="#Cross-Domain-Security" class="headerlink" title="Cross Domain Security"></a>Cross Domain Security</h3><p>Should you allow calls from separate domains? If internal, probably not. If public facing you might need to support cross-domain.</p>
<p>Two Approaches:</p>
<ul>
<li>Support JSONP format</li>
<li>Enable Cross-Origin Resource Sharing (CORS)</li>
</ul>
<h5 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateUser</span>(<span class="params">data</span>) </span>&#123;</div><div class="line">    <span class="comment">//use Data</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">GET /api/games?callback=updateGames HTTP/<span class="number">1.1</span></div><div class="line">Accept: application/javascript</div><div class="line">Host: localhost:<span class="number">8863</span></div><div class="line"></div><div class="line">-&gt; updateUser(&#123;total=<span class="number">1</span>, results=[...]&#125;);</div></pre></td></tr></table></figure>
<p>The data sent back from the server will be the same. It will just be wrapped in a function call.</p>
<h5 id="CORS"><a href="#CORS" class="headerlink" title="CORS"></a>CORS</h5><ul>
<li>Allows Cross Site support from browser but requires handshake</li>
<li>Implementing can be difficult but many platforms support it</li>
<li>Rules implemented on server</li>
</ul>
<h3 id="Authentication"><a href="#Authentication" class="headerlink" title="Authentication"></a>Authentication</h3><p>Who is calling the API?</p>
<ul>
<li>Server-to-Server Authentication using API keys and shared secrets</li>
<li>User Proxy Authenticaton using OAuth and similar</li>
<li>Direct User Authentication using cookies or tokens. Common for private APIs</li>
<li>Credential: A fact that can describe an identity like username and password</li>
</ul>
<blockquote>
<p>Authentication: Validate a set of credentials to identify an entity (whether virtual or actual).</p>
<p>Authorization: Verification that an entity has right to access a resource or action.</p>
</blockquote>
<h4 id="API-Keys"><a href="#API-Keys" class="headerlink" title="API Keys"></a>API Keys</h4><ul>
<li>For non-user specific API usage like AWS, Google maps for monitoring usage</li>
<li>Sign up for API key</li>
<li>System returns API key and shared secret (usually for encryption)</li>
<li>Developer creates a request providing the API key.</li>
<li>A Signature is created for the requestusing the shared secret</li>
<li>Request + Signature is sent to service</li>
<li>Server looks up shared secret for user via API key and signs the request with it</li>
<li>Server verifies same signatures and within timeout</li>
<li>If all valid server executes request and returns data</li>
</ul>
<h4 id="User-Security-Authenticating-Users"><a href="#User-Security-Authenticating-Users" class="headerlink" title="User Security/Authenticating Users"></a>User Security/Authenticating Users</h4><p>If your system has users, how do you verify which user is calling the API?</p>
<ul>
<li>For 1st party solutions you could use what the web server provides like using Windows Authentication or ASP.NET forms authentications.</li>
<li>For 3rd party API developers don’t ask them to collect credentials, use OAuth</li>
</ul>
<h4 id="OAuth"><a href="#OAuth" class="headerlink" title="OAuth"></a>OAuth</h4><p>For allowing developer to act as a user in your system but allows you to keep control of accepting credentials</p>
<p>Then trust a 3rd party with a token that represents the API developer. The developer will never receive the user credentials.</p>
<h2 id="Hypermedia"><a href="#Hypermedia" class="headerlink" title="Hypermedia"></a>Hypermedia</h2><p>Hypermedia is links for APIs helping developers to know how to use the API Links helps APIs become self-describing Links become the application state</p>
<ul>
<li>Hypermedia As The Engine of Application State (HATEOAS)</li>
<li>HATEOAS add links on top of REST-ful HTTP</li>
</ul>
<h3 id="Links"><a href="#Links" class="headerlink" title="Links"></a>Links</h3><p>What kinds of links to provide:</p>
<ul>
<li>Paging</li>
<li>Creating New Items</li>
<li>Retrieving Associations</li>
<li>Actions</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">totalResults</span>: <span class="number">1000</span>,</div><div class="line">    <span class="attr">links</span>: [</div><div class="line">        &#123;<span class="string">"href"</span>: <span class="string">"/api/v1/games?page=1"</span>, <span class="string">"rel"</span>: <span class="string">"prevPage"</span> &#125;,</div><div class="line">        &#123;<span class="string">"href"</span>: <span class="string">"/api/v1/games?page=3"</span>, <span class="string">"rel"</span>: <span class="string">"nextPage"</span> &#125;,</div><div class="line">        &#123;<span class="string">"href"</span>: <span class="string">"/api/v1/games"</span>, <span class="string">"rel"</span>: <span class="string">"insert"</span> &#125;</div><div class="line">    ],</div><div class="line">    <span class="string">"results"</span>: []</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">links</span>: [</div><div class="line">        &#123;<span class="string">"href"</span>: <span class="string">"/api/v1/games/2"</span>, <span class="string">"rel"</span>: <span class="string">"self"</span> &#125;,</div><div class="line">        &#123;<span class="string">"href"</span>: <span class="string">"/api/v1/games/2/rating"</span>, <span class="string">"rel"</span>: <span class="string">"rating"</span> &#125;</div><div class="line">    ],</div><div class="line">    <span class="string">"id"</span>: <span class="number">2</span>,</div><div class="line">    <span class="string">"name"</span>: <span class="string">"Final Fantasy XIII"</span>,</div><div class="line">    ...</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Profile Media Types</p>
<ul>
<li>Profiles are descriptions of data returned</li>
<li>Alternative to using custom MIME types in versioning</li>
<li>Should be included in the Accept header</li>
<li>Server can return profile for client</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">GET /api/order/<span class="number">123</span></div><div class="line">HOST: http:<span class="comment">//..</span></div><div class="line">Accept: appliaction/json;profile=http:<span class="comment">//api.attracs.com/orders</span></div></pre></td></tr></table></figure>
<h3 id="Hypermedia-Standards"><a href="#Hypermedia-Standards" class="headerlink" title="Hypermedia Standards"></a>Hypermedia Standards</h3><p>The standards are emerging None are final</p>
<ul>
<li>HAL</li>
<li>Collection+JSON</li>
</ul>
<p>Based on content types with profile media type Content type defines data formatting Profile media type defines the structure of the data Keeps the format and structure/version separated</p>
<h4 id="HAL"><a href="#HAL" class="headerlink" title="HAL"></a>HAL</h4><ul>
<li>Hypertext Application Language strives to be a lean hypermedia type</li>
<li>Supports standard formats like JSON and XML for including resources and links</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">content type application/hal+json</div><div class="line">content type application/hal+xml</div><div class="line">content type application/hal+json;profile=http://api.attracs.com/orders</div></pre></td></tr></table></figure>
<p>Resources contains state and links plus embedded resources containing state and links</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"_links"</span>:&#123;</div><div class="line">    <span class="string">"self"</span>: &#123;<span class="string">"href"</span>: <span class="string">"/games"</span>&#125;,</div><div class="line">    <span class="string">"next"</span>: &#123;<span class="string">"href"</span>: <span class="string">"/games?page=2"</span>&#125;,</div><div class="line">    <span class="string">"find"</span>: &#123;<span class="string">"href"</span>: <span class="string">"/games&#123;?query&#125;"</span>, <span class="string">"templated"</span>: <span class="literal">true</span>&#125;,</div><div class="line">    <span class="string">"totalCount"</span>: <span class="number">100</span>,</div><div class="line">    <span class="string">"_embedded"</span>: &#123;</div><div class="line">        <span class="string">"results"</span>: [</div><div class="line">            &#123;</div><div class="line">                <span class="string">"_links"</span>: &#123;</div><div class="line">                    <span class="string">"self"</span>: &#123;<span class="string">"href"</span>: <span class="string">"/games/123"</span>&#125;,</div><div class="line">                    ...</div><div class="line">                &#125;,</div><div class="line">                <span class="string">"price"</span>: <span class="number">30.00</span>,</div><div class="line">                <span class="string">"currency"</span>: <span class="string">"USD"</span>,</div><div class="line">                <span class="string">"name"</span>: <span class="string">"Halo 3"</span></div><div class="line">            &#125;,</div><div class="line">            ...</div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Template Links: Used when URI includes a template (e.g. RFC6570)</p>
<h4 id="Collection-JSON"><a href="#Collection-JSON" class="headerlink" title="Collection + JSON"></a>Collection + JSON</h4><ul>
<li>A standard for reading and writing collections</li>
<li>Communicating lists and individual items</li>
<li>Includes UI elements in messages</li>
<li>Good for simple machine driven lists but a bit verbose for data-driven REST</li>
<li>Including UI elements sets scene for automating code</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">content type application/vnd.collection+json</div><div class="line">content type application/vnd.collection+json;profile=http://foo.com/bar</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"collection"</span>: &#123;</div><div class="line">        <span class="string">"version"</span>: <span class="string">"1.0"</span>,</div><div class="line">        <span class="string">"href"</span>: <span class="string">"http://api.attracs.com/Orders"</span>,</div><div class="line">        <span class="string">"links"</span>: [</div><div class="line">            &#123; <span class="string">"rel"</span>: <span class="string">"feed"</span>, <span class="string">"href"</span>: <span class="string">"http://api.attracs.com/Orders/rss"</span> &#125;</div><div class="line">        ],</div><div class="line">        <span class="string">"items"</span>: [</div><div class="line">            &#123;</div><div class="line">                <span class="string">"href"</span>: <span class="string">"http://api.attracs.com/Orders/1"</span>,</div><div class="line">                <span class="string">"data"</span>: [</div><div class="line">                    &#123; <span class="string">"Id"</span>: <span class="number">1</span>, <span class="string">"Date"</span>: <span class="string">"2014-01-01"</span>&#125;,</div><div class="line">                    ...</div><div class="line">                ],</div><div class="line">                <span class="string">"links"</span>: [</div><div class="line">                    &#123;</div><div class="line">                        <span class="string">"rel"</span>: <span class="string">"customer"</span>,</div><div class="line">                        <span class="string">"href"</span>: <span class="string">"http://api.attracs.com/Orders/1/customer"</span>,</div><div class="line">                        <span class="string">"prompt"</span>: <span class="string">"Show Customer"</span></div><div class="line">                    &#125;,</div><div class="line">                    ...</div><div class="line">                ]</div><div class="line">            &#125;</div><div class="line">        ]</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>It also includes queries and templates for UI building:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"collection"</span>: &#123;</div><div class="line">        ...</div><div class="line">        <span class="string">"queries"</span>: [</div><div class="line">            &#123;</div><div class="line">                <span class="string">"rel"</span>: <span class="string">"search"</span>,</div><div class="line">                <span class="string">"href"</span>: <span class="string">"http://api.attracs.com/Orders/search"</span>,</div><div class="line">                <span class="string">"prompt"</span>: <span class="string">"Find Order"</span>,</div><div class="line">                <span class="string">"data"</span>: [</div><div class="line">                    &#123;<span class="string">"name"</span>: <span class="string">"search"</span>, <span class="string">"value"</span>: <span class="string">""</span>&#125;</div><div class="line">                ]</div><div class="line">            &#125;</div><div class="line">        ],</div><div class="line">        <span class="string">"template"</span>: &#123;</div><div class="line">            <span class="string">"data"</span>: [</div><div class="line">                &#123;<span class="string">"name"</span>: <span class="string">"id"</span>, <span class="string">"value"</span>: <span class="string">""</span>, <span class="string">"prompt"</span>: <span class="string">"Order Id"</span>&#125;,</div><div class="line">                &#123;<span class="string">"name"</span>: <span class="string">"date"</span>, <span class="string">"value"</span>: <span class="string">""</span>, <span class="string">"prompt"</span>: <span class="string">"Order Date"</span>&#125;,</div><div class="line">                ...</div><div class="line">            ]</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kajlund.net/2015/08/31/mocha/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaj Lund">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/luka.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kajlund.net">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/08/31/mocha/" itemprop="url">Mocha</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-08-31T18:25:30+03:00">
                2015-08-31
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2017-06-11T15:54:59+03:00">
                2017-06-11
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Testing/" itemprop="url" rel="index">
                    <span itemprop="name">Testing</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>This doc assumes you are testing server-side code i.e. Node.js V8, not browser clients. Mocha can also run in browsers.</p>
<ul>
<li>Initially developed for NodeJS but has also gained popularity for client side JavaScript testing</li>
<li>Open Source, Cross-Browser client and node.js server support</li>
<li>Supports both TDD and BDD style testing</li>
<li>Supports asynchronous testing</li>
<li>Supports any JavaScript assertion library</li>
<li>Integrates with CI tools</li>
<li>Highlight slow tests</li>
<li>Before, after, before each, after each</li>
<li>Global variable leak detection</li>
</ul>
<h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><ul>
<li>Either get <a href="https://github.com/visionmedia/mocha" target="_blank" rel="external">source from github</a> for  running in browser</li>
<li>or <code>npm install --save-dev mocha</code> for command line support</li>
<li>You can optionally also <code>npm install -g mocha</code> for convenience</li>
<li>Mocha doesn’t provide a default assertion library so typically you’d also install something like<br><a href="http://chaijs.com/" target="_blank" rel="external">chai</a> <code>npm install --save-dev chai</code>.</li>
</ul>
<blockquote>
<p>When running command line you are testing against the v8 engine which is fine for node apps but might not suffice for testing client-side.</p>
</blockquote>
<h2 id="Running-Tests"><a href="#Running-Tests" class="headerlink" title="Running Tests"></a>Running Tests</h2><p>There are a lot of different ways of setting up how to automatically test the code in browsers. A popular option that the AngularJS developer team uses is the <a href="http://karma-runner.github.io/0.12/index.html" target="_blank" rel="external">Karma</a> test runner. A simple option is to create an html-file for running the tests and open it in the different browsers you like to test your code in. For nodejs code you can run mocha from the command line, as an npm script or via the Gulp or Grunt task runners.</p>
<p>If you’ve installed mocha as a global node package you can run tests from the command line. <code>mocha mytests.js myothertest.js</code>.</p>
<p>Mocha by default can look for specific kinds of files. By default it will find a file called tests.js in the current dir. If you instead have all your test files under a directory called <code>test</code> mocha will find and run them all.</p>
<p>Mocha can also watch the files in your test directory and run whenever a file in the directory is changed. <code>mocha -w</code>.</p>
<p>Check the <a href="https://mochajs.org/" target="_blank" rel="external">mocha doc</a> Usage section for more info on params.</p>
<h2 id="Mocha-Features"><a href="#Mocha-Features" class="headerlink" title="Mocha Features"></a>Mocha Features</h2><p>The typical structure of a test file can be found <a href="https://gist.github.com/kajlund/81d4c2f432b4da5b8028" target="_blank" rel="external">here</a></p>
<h3 id="Setup-and-Teardown"><a href="#Setup-and-Teardown" class="headerlink" title="Setup and Teardown"></a>Setup and Teardown</h3><p>The <code>beforeEach</code> function is used to reset whatever we are testing to a fixed state before running each test (it function). The <code>afterEach</code> is similarly runs after each test.</p>
<h3 id="Grouping"><a href="#Grouping" class="headerlink" title="Grouping"></a>Grouping</h3><p>You can group tests together under a <code>describe</code> block as many levels as you want.</p>
<h3 id="Pending-Tests"><a href="#Pending-Tests" class="headerlink" title="Pending Tests"></a>Pending Tests</h3><p>Specifications not yet implemented. Just add the <code>it</code> functions using the description but without implementing the actual test.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">it(<span class="string">'should return NaN if passed 0 operands'</span>);</div><div class="line">it(<span class="string">'should return NaN if passed 1 operand'</span>);</div></pre></td></tr></table></figure>
<h3 id="Skipping-Tests"><a href="#Skipping-Tests" class="headerlink" title="Skipping Tests"></a>Skipping Tests</h3><p>You can skip all but a certain suite or test by calling <strong>.only</strong> after <strong>describe</strong> or <strong>it</strong> calls.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">describe.only(<span class="string">'Add'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    it(<span class="string">'should return the sum of both operands'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            expect(calc.add(<span class="number">1</span>, <span class="number">1</span>)).to.be(<span class="number">2</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">describe(<span class="string">'Add'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    it.only(<span class="string">'should return the sum of both operands'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        expect(calc.add(<span class="number">1</span>, <span class="number">1</span>)).to.be(<span class="number">2</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>You can skip whole suites or certain tests in a suite by adding <strong>.skip</strong> after <strong>describe</strong> or <strong>it</strong> calls.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">describe.skip(<span class="string">'Add'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    it(<span class="string">'should return the sum of both operands'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">            expect(calc.add(<span class="number">1</span>, <span class="number">1</span>)).to.be(<span class="number">2</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div><div class="line"></div><div class="line">describe(<span class="string">'Add'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    it.skip(<span class="string">'should return the sum of both operands'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">        expect(calc.add(<span class="number">1</span>, <span class="number">1</span>)).to.be(<span class="number">2</span>);</div><div class="line">    &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="Assertion-Libraries"><a href="#Assertion-Libraries" class="headerlink" title="Assertion Libraries"></a>Assertion Libraries</h2><ul>
<li>Mocha does not include any specific assertion libraries so you need to choose one.</li>
</ul>
<p>There are many popular assertion libraries to choose from:</p>
<ul>
<li>Chai</li>
<li>expect.js</li>
<li>should.js</li>
<li>many others</li>
</ul>
<h3 id="The-Chai-Assertion-Library"><a href="#The-Chai-Assertion-Library" class="headerlink" title="The Chai Assertion Library"></a>The Chai Assertion Library</h3><p>Chai js supports 3 popular assertion syntaxes:</p>
<ul>
<li>Assert</li>
<li>Expect</li>
<li>Should</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> assert = chai.assert;</div><div class="line"><span class="keyword">var</span> expect = chai.expect;</div><div class="line"><span class="keyword">var</span> should = chai.should();  <span class="comment">//Not IE friendly</span></div></pre></td></tr></table></figure>
<h4 id="Using-The-Expect-Syntax"><a href="#Using-The-Expect-Syntax" class="headerlink" title="Using The Expect Syntax"></a>Using The Expect Syntax</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">expect(myVar).to.equal(<span class="number">3</span>);</div><div class="line">expect(myVar).to.be.a(<span class="string">'string'</span>);</div></pre></td></tr></table></figure>
<h2 id="Sinon"><a href="#Sinon" class="headerlink" title="Sinon"></a>Sinon</h2><h3 id="Spies"><a href="#Spies" class="headerlink" title="Spies"></a>Spies</h3><h3 id="Stubs"><a href="#Stubs" class="headerlink" title="Stubs"></a>Stubs</h3><h3 id="Mocks"><a href="#Mocks" class="headerlink" title="Mocks"></a>Mocks</h3><h2 id="Resources"><a href="#Resources" class="headerlink" title="Resources"></a>Resources</h2><ul>
<li>Unit Testing with Node.js on Pluralsight</li>
<li>Node.js Testing Strategies on Pluralsight</li>
<li><a href="https://mochajs.org/" target="_blank" rel="external">Mocha</a></li>
<li><a href="http://chaijs.com/" target="_blank" rel="external">chai</a></li>
<li><a href="https://github.com/visionmedia/superagent" target="_blank" rel="external">superagent</a></li>
<li><a href="https://github.com/request/request" target="_blank" rel="external">Request http library</a></li>
<li><a href="https://github.com/shouldjs/should.js" target="_blank" rel="external">Should.js assertion library</a></li>
<li><a href="http://dareid.github.io/chakram/" target="_blank" rel="external">Chakram</a> REST API test framework</li>
<li><a href="http://www.mikeball.us/blog/testing-node-with-mocha-expect-and-nock/" target="_blank" rel="external">Testing node with Mocha, expect and noc</a></li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://kajlund.net/2015/08/28/spa/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Kaj Lund">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/luka.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="kajlund.net">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2015/08/28/spa/" itemprop="url">Single Page Applications</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-08-28T18:25:30+03:00">
                2015-08-28
              </time>
            

            
              <span class="post-meta-divider">|</span>
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-check-o"></i>
              </span>
              
                <span class="post-meta-item-text">Post modified</span>
              
              <time title="Post modified" itemprop="dateModified" datetime="2017-06-11T15:53:26+03:00">
                2017-06-11
              </time>
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Architecture/" itemprop="url" rel="index">
                    <span itemprop="name">Architecture</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Categories"><a href="#Categories" class="headerlink" title="Categories"></a>Categories</h2><p>You could broadly categorize frameworks for building SPA’s into:</p>
<ul>
<li>JavaScript only frameworks</li>
<li>Thin JavaScript Layer frameworks</li>
<li>HTML Integration frameworks</li>
</ul>
<h3 id="JavaScript-only-Frameworks"><a href="#JavaScript-only-Frameworks" class="headerlink" title="JavaScript only Frameworks"></a>JavaScript only Frameworks</h3><p>With this approach you do pretty much all work using a JavaScript framework. You get a high level<br>of abstraction and don’t have to simultaneously have expert level knowledge on JavaScript, HTML<br>and CSS. On the other hand performance might suffer and your options in layout, widgets etc.<br>will be restricted by the framework used.</p>
<p>The Ext.js and Sencha Touch frameworks use this approach.</p>
<h3 id="Thin-JavaScript-Layer-Frameworks"><a href="#Thin-JavaScript-Layer-Frameworks" class="headerlink" title="Thin JavaScript Layer Frameworks"></a>Thin JavaScript Layer Frameworks</h3><p>This approach combines the traditional techniques of HTML, CSS and JavaScript. You have less<br>abstraction but probably better performance.</p>
<p>This is perhaps the most common approach and it allows for great flexibility in choosing tools,<br>libraries, widgets etc. The downside of using this approach compared to JavaScript only frameworks<br>is that you apart from knowing JavaScript + libraries also need to know HTML and CSS.</p>
<p>Using this approach the first library to enter the toolbox is typically jQuery. Be aware that if<br>you are building something non-trivial you’re going to want more than jQuery as the code base grows.<br>Typically you’d add some kind of client-side MVC framework for structure and maintainability.</p>
<h3 id="HTML-Integration-Frameworks"><a href="#HTML-Integration-Frameworks" class="headerlink" title="HTML Integration Frameworks"></a>HTML Integration Frameworks</h3><p>This approach in contrast to the JavaScript only Frameworks tries to extend the HTML syntax to better<br>suit building applications. Typically you bind to HTML elements using special syntax (html5 data<br>attributes) and lean on dependency injection.</p>
<p>AngularJS and jQuery Mobile use this approach.</p>
<h2 id="Components-of-a-SPA-Framework"><a href="#Components-of-a-SPA-Framework" class="headerlink" title="Components of a SPA Framework"></a>Components of a SPA Framework</h2><p>There’s no end to the amount of libraries, widgets and different levels of frameworks available<br>for building SPA’s. Here’s some categories of stuff you’d be looking for sooner or later depending<br>on the size of your project.</p>
<ul>
<li>Languages</li>
<li>Structure</li>
<li>Routing</li>
<li>Data model</li>
<li>User Interface Handling</li>
<li>Generic Libraries</li>
<li>Tools<ul>
<li>Package Management</li>
<li>Syntax Checking</li>
<li>ALM Tools</li>
<li>Profiling</li>
<li>Testing</li>
</ul>
</li>
</ul>
<h3 id="Languages"><a href="#Languages" class="headerlink" title="Languages"></a>Languages</h3><p>To build an application you’ll need a programming language. For client side web applications the only consistently available programming language in web browsers is JavaScript.</p>
<p>That said, new languages that can be compiled to JavaScript become available all the time. Maybe the major ones at the time I write this are:</p>
<ul>
<li><a href="http://coffeescript.org/" target="_blank" rel="external">CoffeeScript</a></li>
<li><a href="http://www.dartlang.org/" target="_blank" rel="external">Dart</a></li>
<li><a href="http://www.typescriptlang.org/" target="_blank" rel="external">TypeScript</a></li>
</ul>
<p>I think that among the above mentioned TypeScript seems most interesting. The reason is that the philosophy is to provide what JS will eventually support plus optionally strong typing.</p>
<h3 id="Structure"><a href="#Structure" class="headerlink" title="Structure"></a>Structure</h3><p>If you intend to build something non trivial you’d need to organize your code for maintainability.<br>Many of the client side frameworks provide some form of MVC or MVVM pattern for keeping things<br>under control.</p>
<p>If you’re not using any particular framework, you should have a look at module handling using<br><a href="http://en.wikipedia.org/wiki/Asynchronous_module_definition" target="_blank" rel="external">AMD</a> like <a href="http://requirejs.org/" target="_blank" rel="external">Require.js</a><br>or <a href="http://en.wikipedia.org/wiki/CommonJS" target="_blank" rel="external">CommonJS</a> like <a href="http://browserify.org/" target="_blank" rel="external">Browserify</a>.</p>
<p>Most of the SPA frameworks like will provide their own ideas on how to structure your application.</p>
<h3 id="Routing"><a href="#Routing" class="headerlink" title="Routing"></a>Routing</h3><p>Routing is an important part of a SPA and concerns how to map URL changes in the browser to code in your<br>application.</p>
<p>Some of the more popular client side SPA frameworks like AngularJS and ember.js contain functionality for<br>route handling.</p>
<p>There are libraries that only do route handling that you could adapt as well.</p>
<h3 id="Data-Model"><a href="#Data-Model" class="headerlink" title="Data Model"></a>Data Model</h3><p>Implementing client-side data models is one major thing that sets a library like jQuery apart from a<br>proper SPA framework like Angular.js and ember.js.</p>
<p>Using jQuery your client side data model is often in the DOM. This is usually OK for simple scenarios but<br>starts to break down when you build more complex applications.</p>
<p>Many frameworks allow you to define your objects and lists in your application and support data binding<br>for updates between UI and data model.</p>
<p>Model-Collection-Sync</p>
<h3 id="User-Interface-Handling"><a href="#User-Interface-Handling" class="headerlink" title="User Interface Handling"></a>User Interface Handling</h3><ul>
<li>Grid Systems</li>
<li>Layout/Styling (Bootstrap et. al.)</li>
<li>View Templating (handlebars, underscore)</li>
<li>Data binding</li>
<li><p>Preprocessors (LESS/SASS)</p>
</li>
<li><p>Widgets (Typically based on jQuery)</p>
</li>
</ul>
<p>The larger frameworks typically include routers and module handling capabilities as well. The functionality provided by the larger MVC frameworks can be pieced together using smaller frameworks like Backbone.js, Can.js, Knockout.js and many, many others.</p>
<h3 id="Generic-Libraries"><a href="#Generic-Libraries" class="headerlink" title="Generic Libraries"></a>Generic Libraries</h3><ul>
<li>jQuery, Zepto, underscore</li>
<li>Polyfills (es5shim, modernizr)</li>
</ul>
<h3 id="Tools"><a href="#Tools" class="headerlink" title="Tools"></a>Tools</h3><h4 id="Package-Management"><a href="#Package-Management" class="headerlink" title="Package Management"></a>Package Management</h4><ul>
<li><a href="https://github.com/bower/bower" target="_blank" rel="external">Bower</a></li>
</ul>
<h4 id="Syntax-Checkers"><a href="#Syntax-Checkers" class="headerlink" title="Syntax Checkers"></a>Syntax Checkers</h4><ul>
<li>JsLint/JsHint</li>
</ul>
<h4 id="ALM-tools"><a href="#ALM-tools" class="headerlink" title="ALM tools"></a>ALM tools</h4><ul>
<li>(Node.js + Grunt.js for minification, linting, concatenation and running tests)</li>
</ul>
<h4 id="Profiling"><a href="#Profiling" class="headerlink" title="Profiling"></a>Profiling</h4><ul>
<li>YSlow</li>
</ul>
<h3 id="Unit-Testing"><a href="#Unit-Testing" class="headerlink" title="Unit Testing"></a>Unit Testing</h3><ul>
<li>QUnit</li>
<li>Mocha</li>
<li>Jasmine</li>
</ul>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/luka.jpg"
               alt="Kaj Lund" />
          <p class="site-author-name" itemprop="name">Kaj Lund</p>
           
              <p class="site-description motion-element" itemprop="description">Personal blog of Kaj Lund a.k.a. LuKa</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">24</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">12</span>
                <span class="site-state-item-name">categories</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">33</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml" rel="alternate">
              <i class="fa fa-rss"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Kaj Lund</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  




	





  





  





  






  





  

  

  

  

  

  

</body>
</html>
